<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Service Client in devon4j-spring</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="https://devonfw.com/"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://devonfw.com/website/pages/learning/">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc">Service Client in devon4j-spring</a>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_dependency">Dependency</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_features">Features</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_simple-usage">Simple usage</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_configuration">Configuration</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_service-discovery">Service Discovery</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_headers">Headers</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_timeouts">Timeouts</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_error-handling">Error Handling</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_logging">Logging</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_resilience">Resilience</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc" class="sect0">Service Client in devon4j-spring</h1>
<div class="paragraph">
<p>This guide is about consuming (calling) services from other applications (micro-services) in devon4j-spring.</p>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_dependency">Dependency</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need to add (at least one of) these dependencies to your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;!-- Starter for asynchronous consuming REST services via Jaca HTTP Client (Java11+) --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
  &lt;artifactId&gt;devon4j-starter-http-client-rest-async&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- Starter for synchronous consuming REST services via Jaca HTTP Client (Java11+) --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
  &lt;artifactId&gt;devon4j-starter-http-client-rest-sync&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- Starter for synchronous consuming REST services via Apache CXF (Java8+)
  NOTE: This is an alternative to devon4j-starter-http-client-rest-sync
  --&gt;
&lt;!--
&lt;dependency&gt;
  &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
  &lt;artifactId&gt;devon4j-starter-cxf-client-rest&lt;/artifactId&gt;
&lt;/dependency&gt;
--&gt;
&lt;!-- Starter for synchronous consuming SOAP services via Apache CXF (Java8+) --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
  &lt;artifactId&gt;devon4j-starter-cxf-client-ws&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_features">Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When invoking a service, you need to consider many cross-cutting aspects. You might not think about them in the very first place and you do not want to redundantly implement them multiple times. Therefore, you should consider using this approach. The following sub-sections list the covered features and aspects:</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_simple-usage">Simple usage</h3>
<div class="paragraph">
<p>Assuming you already have a Java interface <code>MyService</code> of the service you want to invoke:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">package com.company.department.foo.mycomponent.service.api.rest;
...

@Path("/myservice")
public interface MyService extends RestService {

  @POST
  @Path("/getresult")
  MyResult getResult(MyArgs myArgs);

  @DELETE
  @Path("/entity/{id}")
  void deleteEntity(@PathParam("id") long id);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, all you need to do is this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Named
public class UcMyUseCaseImpl extends MyUseCaseBase implements UcMyUseCase {
  @Inject
  private ServiceClientFactory serviceClientFactory;

  ...
  private void callSynchronous(MyArgs myArgs) {
    MyService myService = this.serviceClientFactory.create(MyService.class);
    // call of service over the wire, synchronously blocking until result is received or error occurred
    MyResult myResult = myService.myMethod(myArgs);
    handleResult(myResult);
  }

  private void callAsynchronous(MyArgs myArgs) {
    AsyncServiceClient&lt;MyService&gt; client = this.serviceClientFactory.createAsync(MyService.class);
    // call of service over the wire, will return when request is send and invoke handleResult asynchronously
    client.call(client.get().myMethod(myArgs), this::handleResult);
  }

  private void handleResult(MyResult myResult) {
    ...
  }
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, both synchronous and asynchronous invocation of a service is very simple and type-safe. However, it is also very flexible and powerful (see following features). The actual call of <code>myMethod</code> will technically call the remote service over the wire (e.g. via HTTP), including marshalling the arguments (e.g. converting <code>myArgs</code> to JSON) and unmarshalling the result (e.g. converting the received JSON to <code>myResult</code>).</p>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_asynchronous-invocation-of-void-methods">Asynchronous Invocation of void Methods</h4>
<div class="paragraph">
<p>If you want to call a service method with <code>void</code> as the return type, the type-safe <code>call</code> method cannot be used as <code>void</code> methods do not return a result. Therefore you can use the <code>callVoid</code> method as following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">  private void callAsynchronousVoid(long id) {
    AsyncServiceClient&lt;MyService&gt; client = this.serviceClientFactory.createAsync(MyService.class);
    // call of service over the wire, will return when request is send and invoke resultHandler asynchronously
    Consumer&lt;Void&gt; resultHandler = r -&gt; { System.out.println("Response received")};
    client.callVoid(() -&gt; { client.get().deleteEntity(id);}, resultHandler);
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may also provide <code>null</code> as <code>resultHandler</code> for "fire and forget". However, this will lead to the result being ignored, so even in the case of an error you will not be notified.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_configuration">Configuration</h3>
<div class="paragraph">
<p>This solution allows a very flexible configuration on the following levels:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Global configuration (defaults)</p>
</li>
<li>
<p>Configuration per remote service application (microservice)</p>
</li>
<li>
<p>Configuration per invocation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A configuration on a deeper level (e.g. 3) overrides the configuration from a higher level (e.g. 1).</p>
</div>
<div class="paragraph">
<p>The configuration on Level 1 and 2 are configured via <code>application.properties</code>
(see <a href="#devonfw-guide/devon4j.wiki/spring_../guide-configuration.asciidoc">configuration guide</a>).
For Level 1, the prefix <code>service.client.default.</code> is used for properties.
Further, for level 2, the prefix <code>service.client.app.«application».</code> is used where <code>«application»</code> is the
technical name of the application providing the service. This name will automatically be derived from
the java package of the service interface (e.g. <code>foo</code> in <code>MyService</code> interface before) following our
<a href="#devonfw-guide/devon4j.wiki/spring_../coding-conventions.asciidoc.asciidoc_packages">packaging conventions</a>.
In case these conventions are not met, it will fall back to the fully qualified name of the service interface.</p>
</div>
<div class="paragraph">
<p>Configuration on Level 3 has to be provided as a <code>Map</code> argument to the method
<code>ServiceClientFactory.create(Class&lt;S&gt; serviceInterface, Map&lt;String, String&gt; config)</code>.
The keys of this <code>Map</code> will not use prefixes (such as the ones above). For common configuration
parameters, a type-safe builder is offered to create such a map via <code>ServiceClientConfigBuilder</code>.
E.g. for testing, you may want to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">this.serviceClientFactory.create(MyService.class,
  new ServiceClientConfigBuilder().authBasic().userLogin(login).userPassword(password).buildMap());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of a configuration block for your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>service.client.default.url=https://api.company.com/services/${type}
service.client.default.timeout.connection=120
service.client.default.timeout.response=3600

service.client.app.bar.url=https://bar.company.com:8080/services/rest
service.client.app.bar.auth=basic
service.client.app.bar.user.login=user4711
service.client.app.bar.user.password=ENC(jd5ZREpBqxuN9ok0IhnXabgw7V3EoG2p)

service.client.app.foo.url=https://foo.company.com:8443/services/rest
# authForward: simply forward Authorization header (e.g. with JWT) to remote service
service.client.app.bar.auth=authForward</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_service-discovery">Service Discovery</h3>
<div class="paragraph">
<p>You do not want to hardwire service URLs in your code, right? Therefore, different strategies might apply
to <em>discover</em> the URL of the invoked service. This is done internally by an implementation of the interface
<code>ServiceDiscoverer</code>. The default implementation simply reads the base URL from the configuration.
You can simply add this to your <code>application.properties</code> as in the above configuration example.</p>
</div>
<div class="paragraph">
<p>Assuming your service interface has the fully qualified name
<code>com.company.department.foo.mycomponent.service.api.rest.MyService</code>, then the URL would be resolved to
<code><a href="https://foo.company.com:8443/services/rest" class="bare">https://foo.company.com:8443/services/rest</a></code>, as the <code>«application»</code> is <code>foo</code>.</p>
</div>
<div class="paragraph">
<p>Additionally, the URL might use the following variables that will automatically be resolved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>${app}</code> to <code>«application»</code> (useful for default URL)</p>
</li>
<li>
<p><code>${type}</code> to the type of the service. E.g. <code>rest</code> in case of a <a href="#devonfw-guide/devon4j.wiki/spring_../guide-rest.asciidoc">REST</a> service and <code>ws</code> for a <a href="#devonfw-guide/devon4j.wiki/spring_../guide-soap.asciidoc">SOAP</a> service.</p>
</li>
<li>
<p><code>${local.server.port}</code> for the port of your current Java servlet container running the JVM. Should only be used for testing with spring-boot random port mechanism (technically spring cannot resolve this variable, but we do it for you here).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore, the default URL may also be configured as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>service.client.default.url=https://api.company.com/${app}/services/${type}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can use any implementation of <code>ServiceDiscoverer</code>, you can also easily use <a href="https://github.com/Netflix/eureka#eureka">eureka</a> (or anything else) instead to discover your services.
However, we recommend to use <a href="https://istio.io/">istio</a> instead, as described below.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_headers">Headers</h3>
<div class="paragraph">
<p>A very common demand is to tweak (HTTP) headers in the request to invoke the service. May it be for security (authentication data) or for other cross-cutting concerns (such as the <a href="#devonfw-guide/devon4j.wiki/spring_../guide-logging.asciidoc.asciidoc_correlation-id">Correlation ID</a>). This is done internally by implementations of the interface  <code>ServiceHeaderCustomizer</code>.
We already provide several implementations such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ServiceHeaderCustomizerBasicAuth</code> for basic authentication (<code>auth=basic</code>).</p>
</li>
<li>
<p><code>ServiceHeaderCustomizerOAuth</code> for OAuth: passes a security token from security context such as a <a href="https://jwt.io/">JWT</a> via OAuth (<code>auth=oauth</code>).</p>
</li>
<li>
<p><code>ServiceHeaderCustomizerAuthForward</code> forwards the <code>Authorization</code> HTTP header from the running request to the request to the remote service as is (<code>auth=authForward</code>). Be careful to avoid security pitfalls by misconfiguring this feature, as it may also contain sensitive credentials (e.g. basic auth) to the remote service. Never use as default.</p>
</li>
<li>
<p><code>ServiceHeaderCustomizerCorrelationId</code> passed the <a href="#devonfw-guide/devon4j.wiki/spring_../guide-logging.asciidoc.asciidoc_correlation-id">Correlation ID</a> to the service request.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, you can add further custom implementations of <code>ServiceHeaderCustomizer</code> for your individual requirements and additional headers.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_timeouts">Timeouts</h3>
<div class="paragraph">
<p>You can configure timeouts in a very flexible way. First of all, you can configure timeouts to establish the connection (<code>timeout.connection</code>) and to wait for the response (<code>timeout.response</code>) separately. These timeouts can be configured on all three levels as described in the configuration section above.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_error-handling">Error Handling</h3>
<div class="paragraph">
<p>Whilst invoking a remote service, an error may occur. This solution will automatically handle such errors and map them to a higher level <code>ServiceInvocationFailedException</code>. In general, we separate two different types of errors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Network error</strong><br>
In such a case (host not found, connection refused, time out, etc.), there is not even a response from the server. However, in advance to a low-level exception you will get a wrapped <code>ServiceInvocationFailedException</code> (with code <code>ServiceInvoke</code>) with a readable message containing the service that could not be invoked.</p>
</li>
<li>
<p><strong>Service error</strong><br>
In case the service failed on the server-side, the <a href="#devonfw-guide/devon4j.wiki/spring_../guide-rest.asciidoc.asciidoc_error-results">error result</a> will be parsed and thrown as a <code>ServiceInvocationFailedException</code> with the received message and code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This allows to catch and handle errors when a service-invocation failed. You can even distinguish business errors from the server-side from technical errors and implement retry strategies or the like.
Further, the created exception contains detailed contextual information about the service that failed (service interface class, method, URL), which makes it much easier to trace down errors. Here is an example from our tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>While invoking the service com.devonfw.test.app.myexample.service.api.rest.MyExampleRestService#businessError[http://localhost:50178/app/services/rest/my-example/v1/business-error] the following error occurred: Test of business error. Probably the service is temporary unavailable. Please try again later. If the problem persists contact your system administrator.
2f43b03e-685b-45c0-9aae-23ff4b220c85:BusinessErrorCode</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may even provide your own implementation of <code>ServiceClientErrorFactory</code> instead to provide an own exception class for this purpose.</p>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_handling-errors">Handling Errors</h4>
<div class="paragraph">
<p>In case of a synchronous service invocation, an error will be immediately thrown so you can surround the call with a regular try-catch block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">  private void callSynchronous(MyArgs myArgs) {
    MyService myService = this.serviceClientFactory.create(MyService.class);
    // call of service over the wire, synchronously blocking until result is received or error occurred
    try {
      MyResult myResult = myService.myMethod(myArgs);
      handleResult(myResult);
    } catch (ServiceInvocationFailedException e) {
      if (e.isTechnical()) {
        handleTechnicalError(e);
      } else {
        // error code you defined in the exception on the server side of the service
        String errorCode = e.getCode();
        handleBusinessError(e, errorCode;
      }
    } catch (Throwable e) { // you may not handle this explicitly here...
      handleTechnicalError(e);
    }
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using asynchronous service invocation, an error can occurr in a separate thread. Therefore, you may and should define a custom error handler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">  private void callAsynchronous(MyArgs myArgs) {
    AsyncServiceClient&lt;MyService&gt; client = this.serviceClientFactory.createAsync(MyService.class);
    Consumer&lt;Throwalbe&gt; errorHandler = this::handleError;
    client.setErrorHandler(errorHandler);
    // call of service over the wire, will return when request is send and invoke handleResult asynchronously
    client.call(client.get().myMethod(myArgs), this::handleResult);
  }

  private void handleError(Throwalbe error) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The error handler consumes <code>Throwable</code>, and not only <code>RuntimeException</code>, so you can get notified even in case of an unexpected <code>OutOfMemoryError</code>, <code>NoClassDefFoundError</code>, or other technical problems. Please note that the error handler may also be called from the thread calling the service (e.g. if already creating the request fails). The default error handler used if no custom handler is set will only log the error and do nothing else.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_logging">Logging</h3>
<div class="paragraph">
<p>By default, this solution will log all invocations including the URL of the invoked service, success or error status flag and the duration in seconds (with decimal nano precision as available). Therefore, you can easily monitor the status and performance of the service invocations. Here is an example from our tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Invoking service com.devonfw.test.app.myexample.service.api.rest.MyExampleRestService#greet[http://localhost:50178/app/services/rest/my-example/v1/greet/John%20Doe%20%26%20%3F%23] took PT20.309756622S (20309756622ns) and succeded with status 200.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_spring_guide-service-client-spring.asciidoc_resilience">Resilience</h3>
<div class="paragraph">
<p>Resilience adds a lot of complexity, which typically means that addressing this here would most probably result in not being up-to-date and not meeting all requirements. Therefore, we recommend something completely different: the <em>sidecar</em> approach (based on <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/sidecar">sidecar pattern</a>). This means that you use a generic proxy app that runs as a separate process on the same host, VM, or container of your actual application. Then, in your app, you call the service via the sidecar proxy on <code>localhost</code> (service discovery URL is e.g. <code><a href="http://localhost:8081/${app}/services/${type}" class="bare">http://localhost:8081/${app}/services/${type}</a></code>) that then acts as proxy to the actual remote service. Now aspects such as resilience with circuit breaking and the actual service discovery can be configured in the sidecar proxy app, independent of your actual application. Therefore, you can even share and reuse configuration and experience with such a sidecar proxy app even across different technologies (Java, .NET/C#, Node.JS, etc.). Further, you do not pollute the technology stack of your actual app with the infrastructure for resilience, throttling, etc. and can update the app and the sidecar independently when security-fixes are available.</p>
</div>
<div class="paragraph">
<p>Various implementations of such sidecar proxy apps are available as free open source software.
Our recommendation in devonfw is to use <a href="https://istio.io/">istio</a>. This not only provides such a side-car, but also an entire management solution for service-mesh, making administration and maintenance much easier. Platforms like OpenShift support this out of the box.</p>
</div>
<div class="paragraph">
<p>However, if you are looking for details about side-car implementations for services, you can have a look at the following links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Netflix Sidecar - see <a href="http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#_polyglot_support_with_sidecar">Spring Cloud Netflix docs</a></p>
</li>
<li>
<p><a href="https://lyft.github.io/envoy/">Envoy</a> - see <a href="https://dzone.com/articles/microservices-patterns-with-envoy-sidecar-proxy-pa">Microservices Patterns With Envoy Sidecar Proxy</a></p>
</li>
<li>
<p><a href="https://github.com/netflix/Prana">Prana</a> - see <a href="https://medium.com/netflix-techblog/prana-a-sidecar-for-your-netflix-paas-based-applications-and-services-258a5790a015">Prana: A Sidecar for your Netflix PaaS based Applications and Services</a> &#8592; <strong>Not updated as it&#8217;s not used internally by Netflix</strong></p>
</li>
<li>
<p>Keycloak - see <a href="http://www.hawkular.org/blog/2017/07/jaeger-with-security-proxy.html">Protecting Jaeger UI with a sidecar security proxy</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2023-11-07 11:00:25 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      
      const parseCookie = str =>
        str
        .split(';')
        .map(v => v.split('='))
        .reduce((acc, v) => {
          acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());
          return acc;
        }, {});
      
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      } else {
        cookies = parseCookie(document.cookie);
        if (cookies["cookie_consent"] == "accept") {
          consentGranted();
        }
      }
      
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>