<!DOCTYPE html><html lang="en"><head><style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style><style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Updated at 2022-02-18 18:46:41 UTC">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>devonfw guide</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>

<!-- ******************************************** -->


<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
</head>
<body id="devonfw-guide_master.asciidoc" class="book toc2 toc-left">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt="">
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="#header_https://www.katacoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html" class="active">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input id="search-field" type="search" class="form-control mr-sm-2" placeholder="Search by keyword(s)..." aria-label="Search" style="height: auto;" autocomplete="off">
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width="auto" height="auto" alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="header">
<h1>devonfw guide</h1>
<div class="details">
<span id="author" class="author">Updated at 2022-02-18 18:53:53 UTC</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="master.html">devonfw guide</a></span></p><ul class="sectlevel0">
<li><a href="devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting Started</a>
</li>
<li><a href="devonfw-guide_ide.wiki_devonfw-ide.asciidoc.html">devonfw-ide</a>
</li>
<li><a href="devonfw-guide_devon4j.wiki_devon4j.asciidoc.html">Java</a>
</li>
<li><a href="devonfw-guide_devon4ng.wiki_master-devon4ng.asciidoc.html">Angular</a>
</li>
<li><a href="devonfw-guide_devon4net.wiki_master-devon4net.asciidoc.html">.net</a>
</li>
<li><a href="devonfw-guide_devon4node.wiki_master-devon4node.asciidoc.html">NodeJS</a>
</li>
<li><a href="devonfw-guide_general_db_master-database.asciidoc.html">Choosing your Database</a>
</li>
<li><a href="devonfw-guide_devonfw-guide_master.asciidoc_2.html">Tools</a>
<ul class="sectlevel1">
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc.html">CobiGen — Code-based incremental Generator</a>
<ul class="sectlevel2">
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_document-description.html">Document Description</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_cobigen.html">CobiGen</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_cobigen-cli.html">CobiGen CLI</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_maven-build-integration.html">Maven Build Integration</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_eclipse-integration.html">Eclipse Integration</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html"><span class="toc-current">How to</span></a>
<ul class="sectlevel3">
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_EA-client-generation.asciidoc">Enterprise Architect client generation</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc">Angular 8 Client Generation</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_ionic-client-generation.asciidoc">Ionic client generation</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc">Implementing a new Plug-in</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc">Introduction to CobiGen external plug-ins</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_update_CobiGen.asciidoc">How to update CobiGen</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto-devonfw-ide-CobiGen-PoC-E2E.asciidoc">End to End POC Code generation using Entity class</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto-devonfw-CobiGen-OpenAPI.asciidoc">End to End POC Code generation using OpenAPI</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto-devonfw-adapt_template.asciidoc">Adapt Templates from Cobigen</a>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to.html#devonfw-guide_cobigen.wiki_howto_enable_composite_primary_keys_in_entity.asciidoc">Enable Composite Primary Keys in Entity</a>
</li>
</ul>
</li>
<li><a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_template-development.html">Template Development</a>
</li>
</ul>
</li>
<li><a href="devonfw-guide_mrchecker.wiki_master-mrchecker.asciidoc.html">MrChecker - devonfw testing tool</a>
</li>
<li><a href="devonfw-guide_dashboard.wiki_master-dashboard.asciidoc.html">devonfw dashboard</a>
</li>
<li><a href="devonfw-guide_solicitor.wiki_master-solicitor.asciidoc.html">Solicitor User Guide</a>
</li>
<li><a href="devonfw-guide_shop-floor.wiki_master-devonfw-shop-floor.asciidoc.html">devonfw shop floor</a>
</li>
</ul>
</li>
<li><a href="devonfw-guide_devonfw-guide_master.asciidoc_3.html">CI/CD</a>
</li>
<li><a href="devonfw-guide_my-thai-star.wiki_master-my-thai-star.asciidoc.html">MyThaiStar</a>
</li>
<li><a href="devonfw-guide_general_master-contributing.asciidoc.html">Contributing</a>
</li>
<li><a href="devonfw-guide_general_master-release-notes.asciidoc.html">Release Notes</a>
</li>
</ul>
</div>
</div><div id="content">
<div class="sect2">
<h3 id="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_how-to">How to</h3>
<!-- toc disabled -->
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_EA-client-generation.asciidoc">Enterprise Architect client generation</h4>
<div class="paragraph">
<p>We are going to show you <strong>how to</strong> generate source code from an <a href="#devonfw-guide/cobigen.wiki_http://sparxsystems.com/products/ea/">Enterprise Architect</a> diagram
using CobiGen.</p>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_ea-client-generation.asciidoc_prerequisites">Prerequisites</h5>
<div class="paragraph">
<p>If <em>CobiGen_Templates</em> is not already imported into your workspace, follow the next steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the Eclipse’s menu <em>File &gt; Import &gt; Existing Projects into Workspace</em> and browse to select the <code>workspaces/main/CobiGen_Templates</code> directory.</p>
</li>
<li>
<p>Click <em>Finish</em> and you should have the <em>CobiGen_Templates</em> as a new project in Eclipse’s workspace.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also verify that you have the <strong>latest templates of CobiGen</strong>. Your templates folder must contain the <code>crud_java_ea_uml</code> folder.
If you do not see it, please follow the next steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the <a href="#devonfw-guide/cobigen.wiki_https://e-3d.capgemini.com/sites/ESC113658/proj13658/Lists/REF_release/Attachments/2/win_accumulative_patch_22062018.zip">accumulative patch</a>.</p>
</li>
<li>
<p>Open the zip file and extract its content inside the root folder of your Devonfw distribution <strong>Devon-dist_2.4.0/</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After following those steps correctly, you should have the latest version of the templates ready to use.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_ea-client-generation.asciidoc_generation">Generation</h5>
<div class="paragraph">
<p>In this tutorial, we are going to generate the entity infrastructure using as input a class diagram, modelled with <a href="#devonfw-guide/cobigen.wiki_http://sparxsystems.com/products/ea/">Enterprise Architect</a> (EA). First, create a class diagram, an example is shown on figure below:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/EA-gen/classdiagram.png"><img src="images/howtos/EA-gen/classdiagram.png" alt="Eclipse CobiGen generation" width="500"></a>
</div>
</div>
<div class="paragraph">
<p>When you are finished, you will have to export that UML diagram into an XMI version 2.1 file. This is the file format that CobiGen understands. See below a figure showing this process:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/EA-gen/exporting.png"><img src="images/howtos/EA-gen/exporting.png" alt="Eclipse CobiGen generation" width="500"></a>
</div>
</div>
<div class="paragraph">
<p>To open that window, see <a href="#devonfw-guide/cobigen.wiki_http://sparxsystems.com/enterprise_architect_user_guide/13.5/model_publishing/exporttoxmi.html">this</a> tutorial.</p>
</div>
<div class="paragraph">
<p>After having that exported file, change its extension from <code>xmi</code> to <code>xml</code>. Then create an <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4j/wiki/tutorial-newapp">devon4j project</a> and import the exported file into the <code>core</code> of your devon4j project.</p>
</div>
<div class="paragraph">
<p>Now we are going to start the generation, right-click your exported file and select  <em>CobiGen &gt; Generate</em>, finally select the entity infrastructure increment:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/EA-gen/generating.png"><img src="images/howtos/EA-gen/generating.png" alt="Eclipse CobiGen generation" width="500"></a>
</div>
</div>
<div class="paragraph">
<p>After following all these steps, your generated files should be inside <code>src\main\java</code> folder. If you want an XMI example, you will find it <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/blob/master/cobigen/cobigen-xmlplugin/src/test/resources/testdata/integrationtest/uml-classdiag/completeUmlXmi.xml">here</a>.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc">Angular 8 Client Generation</h4>
<div class="paragraph">
<p>The generation can create a full Angular 8 client using the devon4ng-application-template package located at workspaces/examples folder of the distribution. For more details about this package, please refer <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4ng-application-template">here</a>.</p>
</div>
<div class="paragraph">
<p>Take into account that the TypeScript merging for CobiGen needs Node 6 or higher to be installed at your machine.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a short introduction to the Angular generation. For a deeper tutorial including the generation of the backend, we strongly recommend you to follow <a href="#devonfw-guide_cobigen.wiki_files_HOW-TO-devonfw-ide-CobiGen-PoC-E2E_v3.2.pdf">this document</a>.
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_requisites">Requisites</h5>
<div class="paragraph">
<p>Install yarn globally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">npm install -g yarn</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_angular-8-workspace">Angular 8 workspace</h5>
<div class="paragraph">
<p>The output location of the generation can be defined editing the <strong><em>cobigen.properties</em></strong> file located at <strong><em>crud_angular_client_app/templates</em></strong> folder of the <strong><em>CobiGen_Templates</em></strong> project.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/angular4-gen/ng4gen_7.png"><img src="images/howtos/angular4-gen/ng4gen_7.png" alt="cobigen.properties file" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>By default, the output path would be into the <em>devon4ng-application-template</em> folder at the root of the devon4j project parent folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root/
 |- devon4ng-application-template/
 |- devon4j-project-parent/
   |- core/
   |- server/</pre>
</div>
</div>
<div class="paragraph">
<p>However, this path can be changed, for example to <em>src/main/client</em> folder of the devon4j project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-txt" data-lang="txt">relocate: ./src/main/client/${cwd}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>root/
 |- devon4j-project-parent/
   |- core/
      |- src
        |- main
          |- client
   |- server/</pre>
</div>
</div>
<div class="paragraph">
<p>Once the output path is chosen, copy the files of <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4ng-application-template"><code>DEVON4NG-APPLICATION-TEMPLATE</code></a> repository into this output path.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_install-node-dependencies">Install Node dependencies</h5>
<div class="paragraph">
<p>Open a terminal into devon4ng-application-template copied and just run the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">yarn</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will start the installation of all node packages needed by the project into the node_modules folder.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_generating">Generating</h5>
<div class="paragraph">
<p>From an Eto object, right click, CobiGen → Generate will show the CobiGen wizard relative to client generation:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/angular4-gen/ng4gen_1.png"><img src="images/howtos/angular4-gen/ng4gen_1.png" alt="CobiGen Client Generation Wizard" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>Check all the increments relative to Angular:</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Angular devon4j URL increment is only needed for the first generations however, checking it again on next generation will not cause any problem.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As we done on other generations, we click Next to choose which fields to include at the generation or simply clicking Finish will start the generation.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/angular4-gen/ng4gen_3.png"><img src="images/howtos/angular4-gen/ng4gen_3.png" alt="CobiGen Client Generation Wizard 3" width="450"></a>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_routing">Routing</h5>
<div class="paragraph">
<p>Due to the nature of the TypeScript merger, currently is not possible to merge properly the array of paths objects of the routings at app.routing.ts file so, this modification should be done by hand on this file. However, the import related to the new component generated is added.</p>
</div>
<div class="paragraph">
<p>This would be the generated <code>app-routing.module</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">import { Routes, RouterModule } from '@angular/router';
import { LoginComponent } from './login/login.component';
import { AuthGuard } from './shared/security/auth-guard.service';
import { InitialPageComponent } from './initial-page/initial-page.component';
import { HomeComponent } from './home/home.component';
import { SampleDataGridComponent } from './sampledata/sampledata-grid/sampledata-grid.component';
//Routing array
const appRoutes: Routes = [{
    path: 'login',
    component: LoginComponent
}, {
    path: 'home',
    component: HomeComponent,
    canActivate: [AuthGuard],
    children: [{
        path: '',
        redirectTo: '/home/initialPage',
        pathMatch: 'full',
        canActivate: [AuthGuard]
    }, {
        path: 'initialPage',
        component: InitialPageComponent,
        canActivate: [AuthGuard]
    }]
}, {
    path: '**',
    redirectTo: '/login',
    pathMatch: 'full'
}];
export const routing = RouterModule.forRoot(appRoutes);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding the following into the children object of <code>home</code>, will add into the side menu the entry for the component generated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">{
    path: 'sampleData',
    component: SampleDataGridComponent,
    canActivate: [AuthGuard],
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">import { Routes, RouterModule } from '@angular/router';
import { LoginComponent } from './login/login.component';
import { AuthGuard } from './shared/security/auth-guard.service';
import { InitialPageComponent } from './initial-page/initial-page.component';
import { HomeComponent } from './home/home.component';
import { SampleDataGridComponent } from './sampledata/sampledata-grid/sampledata-grid.component';
//Routing array
const appRoutes: Routes = [{
    path: 'login',
    component: LoginComponent
}, {
    path: 'home',
    component: HomeComponent,
    canActivate: [AuthGuard],
    children: [{
        path: '',
        redirectTo: '/home/initialPage',
        pathMatch: 'full',
        canActivate: [AuthGuard]
    }, {
        path: 'initialPage',
        component: InitialPageComponent,
        canActivate: [AuthGuard]
    }, {
        path: 'sampleData',
        component: SampleDataGridComponent,
        canActivate: [AuthGuard],
    }]
}, {
    path: '**',
    redirectTo: '/login',
    pathMatch: 'full'
}];
export const routing = RouterModule.forRoot(appRoutes);</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/angular4-gen/ng4gen_6.png"><img src="images/howtos/angular4-gen/ng4gen_6.png" alt="`APP SideMenu`" width="450"></a>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_jwt-authentication"><code>JWT</code> Authentication</h5>
<div class="paragraph">
<p>If you are using a back end server with <code>JWT</code> Authentication (there is a sample in workspaces/folder called <code><strong>sampleJwt</strong></code>) you have to specify the Angular application to use this kind of authentication.</p>
</div>
<div class="paragraph">
<p>By default the variable is set to CSRF but you can change it to <code>JWT</code> by going to the <a href="devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4ng-application-template/blob/develop/src/environments/environment.ts#L10">Enviroment.ts</a> and setting <code>security: 'jwt'</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_angular-client-generation.asciidoc_running">Running</h5>
<div class="paragraph">
<p>First of all, run your devon4j java server by right clicking over <code>SpringBootApp.java</code> Run As → Java Application. This will start to run the <code>SpringBoot</code> server. Once you see the Started <code>SpringBoot</code> in <code>XX</code> seconds, the backend is running.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/angular4-gen/ng4gen_4.png"><img src="images/howtos/angular4-gen/ng4gen_4.png" alt="Starting `SpringBoot`" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>Once the the server is running, open a Devon console at the output directory defined previously and run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">ng serve --open</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will run the Angular 8 application at:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:4200</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/angular4-gen/ng4gen_5.png"><img src="images/howtos/angular4-gen/ng4gen_5.png" alt="Running Angular 8 app" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>Once finished, the browser will open automatically at the previous localhost URL showing the Angular 8 application, using the credentials set at the devon4j java server you will be able to access.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_ionic-client-generation.asciidoc">Ionic client generation</h4>
<div class="paragraph">
<p>We are going to show you <strong>how to</strong> generate a CRUD Ionic application from an <strong>ETO</strong>
using CobiGen.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a short introduction to the Ionic generation. For a deeper tutorial including the generation of the backend, we strongly recommend you to follow <a href="#devonfw-guide_cobigen.wiki_files_HOW-TO-devonfw-ide-CobiGen-PoC-E2E_v3.2.pdf">this document</a>.
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_ionic-client-generation.asciidoc_prerequisites">Prerequisites</h5>
<div class="paragraph">
<p>Before starting, make sure you already have in your computer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#devonfw-guide/cobigen.wiki_https://ionicframework.com/docs/installation/cli">Ionic</a>: by following the steps defined on that page.
It includes installing:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#devonfw-guide/cobigen.wiki_https://nodejs.org/en/">NodeJS</a>: We have to use "NPM" for downloading packages.</p>
</li>
<li>
<p>Ionic CLI.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#devonfw-guide/cobigen.wiki_https://capacitor.ionicframework.com/docs/getting-started/">Capacitor</a>: Necessary to access to native device features.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <em>CobiGen_Templates</em> are not already downloaded, follow the next steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right click on any file of your workspace <em>CobiGen &gt; Update Templates</em> and now you are able to start the generation.</p>
</li>
<li>
<p>If you want to adapt them, click <em>Adapt Templates</em> and you should have the <em>CobiGen_Templates</em> as a new project in Eclipse’s workspace.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After following those steps correctly, you should have the latest version of the templates ready to use.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_ionic-client-generation.asciidoc_generation">Generation</h5>
<div class="paragraph">
<p>We are going to generate the CRUD into a <strong>sample application</strong> that we have developed for
testing this functionality. It is present on your <code>workspaces/examples</code> folder (devon4ng-ionic-application-template). If you do not see it, you can clone or download it from <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4ng-ionic-application-template">here</a>.</p>
</div>
<div class="paragraph">
<p>After having that sample app, please create an <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4ng/wiki/tutorial-newapp">devon4j project</a> and then start implementing the ETO: You will find an example <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4j/blob/develop/samples/core/src/main/java/io/devonfw/gastronomy/restaurant/tablemanagement/logic/api/to/TableEto.java">here</a>.</p>
</div>
<div class="paragraph">
<p>As you can see, <code>TableEto</code> contains 3 attributes: 2 of them are <code>Long</code> and the third one <code>TableState</code> is an enum that you will find
<a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/devon4j/blob/develop/samples/core/src/main/java/io/devonfw/gastronomy/restaurant/tablemanagement/common/api/datatype/TableState.java">here</a>.
The Ionic generation works fine for any Java primitive attribute (Strings, floats, chars, boolean…​) and enums. However, if you want to use your own objects, you should
override the <code>toString()</code> method, as explained <a href="#devonfw-guide/cobigen.wiki_https://stackoverflow.com/questions/35361482/typescript-override-tostring">here</a>.</p>
</div>
<div class="paragraph">
<p>The attributes explained above will be used for generating a page that shows a list. Each item of that list
will show the values of those attributes.</p>
</div>
<div class="paragraph">
<p>For generating the files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right click your ETO file and click on <em>CobiGen &gt; Generate</em> as shown on the figure below.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/rightClick.png"><img src="images/howtos/ionic-gen/rightClick.png" alt="Eclipse CobiGen generation" width="500"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the Ionic increments for generating as shown below. <em>Increments group a set of templates for generating
different projects</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong><code>Ionic List</code></strong> used for generating the page containing the list.</p>
</li>
<li>
<p><strong><code>Ionic devon4ng environments</code></strong>  is for stating the server path.</p>
</li>
<li>
<p><strong><code>Ionic i18n</code></strong> used for generating the different language translations for the <em>`translationService`</em> (currently English and Spanish).</p>
</li>
<li>
<p><strong><code>Ionic routing</code></strong> adds an app-routing.module.ts file to allow navigation similar to the one available in Angular.</p>
</li>
<li>
<p><strong><code>Ionic theme</code></strong> generates the <code>variables.scss</code> file which contains variables to style the application.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/wizardCobiGen.png"><img src="images/howtos/ionic-gen/wizardCobiGen.png" alt="CobiGen Ionic Wizard" width="500"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, the generated files will be placed inside "devon4ng-ionic-application-template", next to the root of your project’s folder.
See the image below to know where they are generated. For <strong>changing the generation path</strong> and the name of the application go to <em>CobiGen_Templates/crud_ionic_client_app/cobigen.properties</em>.
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/pathOfGeneration.png"><img src="images/howtos/ionic-gen/pathOfGeneration.png" alt="Generation path" width="500"></a>
</div>
</div>
<div class="paragraph">
<p>Now that we have generated the files, lets start testing them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First change the <strong>SERVER_URL</strong> of your application. For doing that, modify <em>src/environments/environments.ts</em>, also modify <em>src/environments/environments.android.ts</em> (android) and <em>src/environments/environments.prod.ts</em> (production) if you want to test in different environments.</p>
</li>
<li>
<p>Check that there are no duplicated imports. Sometimes there are duplicated imports in <em>src/app/app.module.ts</em>.
This happens because the merger of CobiGen prefers to duplicate rather than to delete.</p>
</li>
<li>
<p>Run <code>npm install</code> to install all the required dependencies.</p>
</li>
<li>
<p>Run <code>`ionic serve</code> on your console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After following all these steps your application should start. However, remember that you will need your <strong>server</strong> to be running for access to the list page.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_ionic-client-generation.asciidoc_running-it-on-android">Running it on Android</h5>
<div class="paragraph">
<p>To run the application in an android emulated device, it is necessary to have Android Studio and Android SDK. After its installation, the following commands have to be run on your console:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>npx cap init "name-for-the-app (between quotes)" "id-for-the-app (between quotes)"</code></p>
</li>
<li>
<p><code>ionic build --configuration=android</code>. To use this command, you must add an android build configuration at angular.json</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>    "build": {
      ...
      "configurations": {
        ...
        "android": {
          "fileReplacements": [
            {
              "replace": "src/environments/environment.ts",
              "with": "src/environments/environment.android.ts"
            }
          ]
        },
      }
    }</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>npx cap add android</code></p>
</li>
<li>
<p><code>npx cap copy</code></p>
</li>
<li>
<p><code>npx cap open android</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last steps are done in Android studio: make the project, make the app, build and APK and run in a device.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/and-vsc-make.png"><img src="images/howtos/ionic-gen/and-vsc-make.png" alt="Click on make project" width="500"></a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/and-vsc-make-app.png"><img src="images/howtos/ionic-gen/and-vsc-make-app.png" alt="click on make app" width="500"></a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/and-vsc-build-apk.png"><img src="images/howtos/ionic-gen/and-vsc-build-apk.png" alt="click on build APK" width="500"></a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/ionic-gen/and-vsc-build-run.png"><img src="images/howtos/ionic-gen/and-vsc-build-run.png" alt="click on running device" width="500"></a>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc">Implementing a new Plug-in</h4>
<div class="paragraph">
<p>New plug-ins can implement an input reader, a merger, a matcher, a trigger interpreter, and/or a template engine as explained <a href="#devonfw-guide_cobigen.wiki_cobigen-core_development.asciidoc_extension-mechanism">here</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is discouraged to have <code>cobigen-core</code> dependencies at runtime, except for <code>cobigen-core-api</code> which definitely must be present.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_plugin-activator">Plugin Activator</h5>
<div class="paragraph">
<p>Each plug-in has to have an plug-in activator class implementing the interface <code>GeneratorPluginActivator</code> from the core-api. This class will be used to load the plug-in using the <code>PluginRegistry</code> as explained <a href="#devonfw-guide_cobigen.wiki_cobigen-core_development.asciidoc_loadplugin">here</a>. This class implements two methods:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>bindMerger()</code> → returns a mapping of merge strategies and its implementation to be registered.</p>
</li>
<li>
<p><code>bindTriggerInterpreter()</code>→ returns the trigger interpreters to be provided by this plug-in.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Both methods create and register instances of mergers and trigger interpreters to be provided by the new plug-in.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_adding-trigger-interpreter">Adding Trigger Interpreter</h5>
<div class="paragraph">
<p>The trigger interpreter has to implement the <code>TriggerInterpreter</code> interface from the core. The trigger interpreter defines the type for the new plugin and creates new <code>InputReader</code> and new Matcher objects.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_adding-input-reader">Adding Input Reader</h5>
<div class="paragraph">
<p>The input reader is responsible of read the input object and parse it into
 FreeMarker models. The input reader must be implemented for the type of the
 input file. If there is any existent plugin that has the same file type as input,
 there will be no need to add a new input reader to the new plug-in.</p>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_input-reader-interface">Input Reader Interface</h6>
<div class="paragraph">
<p>The interface needed to add a new input reader is defined at the core. Each new
sub plug-in must implements this interface if is needed an input reader for it.</p>
</div>
<div class="paragraph">
<p>The interface implements the basic methods that an input reader must have,
but if additional methods are required, the developer must add a new interface
that extends the original interface <strong><em>`InputReader.java`</em></strong> from the core-api
and implement that on the sub plug-in.</p>
</div>
<div class="paragraph">
<p>The methods to be implemented by the input reader of the new sub plugin are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Return Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isValidInput(Object input)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>boolean</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function will be called if matching triggers or matching templates should be retrieved for a given input object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createModel(Object input)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Map&lt;String, Object&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function should create the FreeMarker object model from the given input.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>combinesMultipleInputObjects(Object input)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>boolean</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">States whether the given input object combines multiple input objects to be used for generation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getInputObjects(Object input, Charset inputCharset)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>List&lt;Object&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will return the set of combined input objects if the given input combines multiple input objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getTemplateMethods(Object input)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Map&lt;String, Object&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This method returns available template methods from the plugins as Map. If the plugin which corresponds to the input does not provide any template methods an empty Map will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getInputObjectsRecursively(Object input, Charset inputCharset)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>List&lt;Object&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will return the set of combined input objects if the given input combines multiple input objects.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_model-constants">Model Constants</h6>
<div class="paragraph">
<p>The Input reader will create a model for FreeMarker. A Freemarker model must
have variables to use them at the <code>.ftl</code> template file. Refer to <a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_cobigen.html#devonfw-guide_cobigen.wiki_cobigen-javaplugin.asciidoc_java-input-reader">Java Model</a> to see the FreeMarker model example for java input files.</p>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_registering-the-input-reader">Registering the Input Reader</h6>
<div class="paragraph">
<p>The input reader is an object that can be retrieved using the correspondent get
 method of the trigger interpreter object. The trigger interpreter object is
 loaded at the eclipse plug-in using the load plug-in method explained
 <a href="#devonfw-guide_cobigen.wiki_cobigen-core_development.asciidoc_loadplugin">here</a>.
 That way, when the core needs the input reader, only needs to call that <code>getInputReader</code> method.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_adding-matcher">Adding Matcher</h5>
<div class="paragraph">
<p>The matcher implements the <code>MatcherInterpreter</code> interface from the core-api.
Should be implemented for providing a new input matcher. Input matcher are
defined as part of a trigger and provide the ability to restrict specific
inputs to a set of templates.
This restriction is implemented with a <code>MatcherType</code> <code>enum</code>.</p>
</div>
<div class="paragraph">
<p>E.g <code>JavaPlugin</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private enum MatcherType {
    /** Full Qualified Name Matching */
    FQN,
    /** Package Name Matching */
    PACKAGE,
    /** Expression interpretation */
    EXPRESSION
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore, matchers may provide several variable assignments, which might be
dependent on any information of the matched input and thus should be resolvable
by the defined matcher.</p>
</div>
<div class="paragraph">
<p>E.g <code>JavaPlugin</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private enum VariableType {
    /** Constant variable assignment */
    CONSTANT,
    /** Regular expression group assignment */
    REGEX
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_adding-merger">Adding Merger</h5>
<div class="paragraph">
<p>The merger is responsible to perform merge action between new output with the
existent data at the file if it already exists. Must implement the Merger
interface from the core-api.
The implementation of the Merge interface must override the following methods:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Return Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getType()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>String</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the type, this merger should handle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>merge(File base, String patch, String targetCharset)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>String</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merges the patch into the base file.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Is important to know that any exception caused by the merger must throw a <code>MergeException</code> from the core-api to the eclipse-plugin handle it.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_changes-since-eclipse--maven-3.x">Changes since Eclipse / Maven 3.x</h5>
<div class="paragraph">
<p>Since version 3.x the Eclipse and Maven plugins of CobiGen utilize the Java <code>ServiceLoader</code> mechanic to find and register plugins at runtime. To enable a new plugin to be discovered by this mechanic the following steps are needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create the file <code>META-INF/services/com.devonfw.cobigen.api.extension.GeneratorPluginActivator</code> containing just the full qualified name of the class implementing the <code>GeneratorPluginActivator</code> interface, if the plugin provides a <code>Merger</code> and/or a <code>TriggerInterpreter</code></p>
</li>
<li>
<p>create the file <code>META-INF/services/com.devonfw.cobigen.api.extension.TextTemplateEngine</code> containing just the full qualified name of the class implementing the <code>TextTemplateEngine</code> interface, if provided by the plugin</p>
</li>
<li>
<p>include <code>META-INF</code> into the target bundle (i.e. the folder <code>META-INF</code> has to be present in the target jar file)</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Example: Java Plugin</div>
<div class="paragraph">
<p>The java plugin provides both a <code>Merger</code> and a <code>TriggerInterpreter</code>. It contains therefore a <code>com.devonfw.cobigen.api.extension.GeneratorPluginActivator</code> file with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>com.devonfw.cobigen.javaplugin.JavaPluginActivator</code></pre>
</div>
</div>
<div class="paragraph">
<p>This makes the <code>JavaPluginActivator</code> class discoverable by the <code>ServiceLoader</code> at runtime.</p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>to properly include the plugin into the current system and use existing infrastructure, you need to add the plugin as a module in <code>/cobigen/pom.xml</code> (in case of a <code>Merger</code>/<code>TriggerInterpreter</code> providing plugin) and declare that as the plugin’s parent in it’s own <code>pom.xml</code> via</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;parent&gt;
    &lt;groupId&gt;com.devonfw&lt;/groupId&gt;
    &lt;artifactId&gt;cobigen-parent&lt;/artifactId&gt;
    &lt;version&gt;dev-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>or <code>/cobigen/cobigen-templateengines/pom.xml</code> (in case of a <code>Merger</code>/<code>TriggerInterpreter</code> providing plugin) and declare that as the plugin’s parent in it’s own <code>pom.xml</code> via</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;parent&gt;
    &lt;groupId&gt;com.devonfw&lt;/groupId&gt;
    &lt;artifactId&gt;cobigen-tempeng-parent&lt;/artifactId&gt;
    &lt;version&gt;dev-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the plugin provides both just use the <code>/cobigen/pom.xml</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The dependencies of the plugin are included in the bundle</p>
</li>
<li>
<p>To make the plugin available to the Eclipse plugin it must be included into the current <code>compositeContent.xml</code> and <code>compositeArtifacts.xml</code> files. Both files are located in <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/tree/gh-pages/updatesite/stable"><code></code></a><code><a href="https://github.com/devonfw/cobigen/tree/gh-pages/updatesite/{test|stable}" class="bare">https://github.com/devonfw/cobigen/tree/gh-pages/updatesite/{test|stable}</a></code>. To do so, add an <code>&lt;child&gt;</code> entry to the <code>&lt;children&gt;</code> tag in both files and adapt the <code>size</code> attribute to match the new number of references. The <code>location</code> attribute of the new <code>&lt;child&gt;</code> tag needs to be the artifact id of the plugins <code>pom.xml</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Example: Java Plugin</div>
<div class="paragraph">
<p>In case of the Java plugin, the entry is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;child location="cobigen-javaplugin"/&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-a-new-plugin.asciidoc_deployment">Deployment</h6>
<div class="paragraph">
<p>If you want to create a test release of eclipse you need to run the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sh deploy.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>on the cloned cobigen repository while making sure, that your current version of cobigen cloned is a snapshot version. This will automatically be detected by the deploy script.</p>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc">Introduction to CobiGen external plug-ins</h4>
<div class="paragraph">
<p>Since September of 2019, a major change on CobiGen has taken place. CobiGen is written in Java code and previously, it was very hard for developers to create new plug-ins in other languages.</p>
</div>
<div class="paragraph">
<p>Creating a new plug-in means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Being able to parse a file in that language.</p>
</li>
<li>
<p>Create a human readable model that can be used to generate templates (by retrieving properties from the model).</p>
</li>
<li>
<p>Enable merging files, so that user’s code does not get removed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the Java plug-in it was relatively easy. As you are inside the Java world, you can use multiple utilities or libraries in order to get the <a href="#devonfw-guide/cobigen.wiki_https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a> or to merge Java code. With this new feature, we wanted that behaviour to be possible for any programming language.</p>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_general-intuition">General intuition</h5>
<div class="paragraph">
<p>Below you will find a very high level description of how CobiGen worked in previous versions:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/oldCobiGen.png"><img src="images/howtos/todo-plugin/oldCobiGen.png" alt="Old CobiGen" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>Basically, when a new input file was sent to CobiGen, it called the input reader to create a model of it (see <a href="devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/cobigen-tsplugin.html#object-model">here</a> an example of a model). That model was sent to the template engine.</p>
</div>
<div class="paragraph">
<p>Afterwards, the template engine generated a new file which had to be merged with the original one. All this code was implemented in Java.</p>
</div>
<div class="paragraph">
<p>On the new version, we have implemented a handler (<code>ExternalProcessHandler</code>) which connects through TCP/IP connection to a server (normally on localhost:5000). This server can be implemented in any language (.Net, Node.js, Python…​) it just needs to implement a REST API defined <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen-template-plugin/blob/master/APIContract.yml">here</a>. The most important services are the input reading and merging:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/newCobiGen.png"><img src="images/howtos/todo-plugin/newCobiGen.png" alt="New CobiGen" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>CobiGen acts as a client that sends requests to the server in order to read the input file and create a model. The model is returned to the template engine so that it generates a new file. Finally, it is sent back to get merged with the original file.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_how-to-create-new-external-plug-in">How to create new external plug-in</h5>
<div class="paragraph">
<p>The creation of a new plug-in consists mainly in three steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation of the server (external process).</p>
</li>
<li>
<p>Creation of a CobiGen plug-in.</p>
</li>
<li>
<p>Creation of templates.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_server-external-process">Server (external process)</h6>
<div class="paragraph">
<p>The server can be programmed in any language that is able to implement REST services endpoints. The API that needs to implement is defined with <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen-template-plugin/blob/master/APIContract.yml">this contract</a>. You can paste the content to <a href="https://editor.swagger.io/" class="bare">https://editor.swagger.io/</a> for a better look.</p>
</div>
<div class="paragraph">
<p>We have already created a NestJS server that implements the API defined above. You can find the code <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen-devon4node-server/blob/master/cobigen-nest-server/src/processmanagement/processmanagement.controller.ts">here</a> which you can use as an example.</p>
</div>
<div class="paragraph">
<p>As you can see, the endpoints have the following naming convention: <code>processmanagement/todoplugin/nameOfService</code> where you will have to change <code>todo</code> to your plug-in name (e.g. <code>rustplugin</code>, <code>pyplugin</code>, <code>goplugin</code>…​)</p>
</div>
<div class="paragraph">
<p>When implementing service <code>getInputModel</code> which returns a model from the input file there are only two restrictions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>path</code> key must be added. Its value can be the full path of the input file or just the file name. It is needed because in CobiGen there is a <a href="devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/eclipse-plugin_development.html#batch-mode">batch mode</a>, in which you can have multiple input objects inside the same input file. You do not need to worry about batch mode for now.</p>
</li>
<li>
<p>On the root of your model, for each found key that is an object (defined with brackets <code>[{}]</code>), CobiGen will try to use it as an input object. For example, this could be a valid model:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-JSON" data-lang="JSON">{
  "path": "example/path/employee.entity.ts"
  "classes": [
    {
      "identifier": "Employee",
      "modifiers": [
        "export"
      ],
      "decorators": [
        {
          "identifier": {
            "name": "Entity",
            "module": "typeorm"
          },
          "isCallExpression": true
        }
      ],
      "properties": [
        {
          "identifier": "id",
    ...
    ...
    ...
    }]
    "interfaces": [{
        ...
    }]
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For this model, CobiGen would use as input objects all the <code>classes</code> and <code>interfaces</code> defined. On the templates we would be able to do <code>model.classes[0].identifier</code> to get the class name. These input objects depend on the language, therefore you can use any key.</p>
</div>
<div class="paragraph">
<p>In order to test the server, you will have to deploy it on your local machine (localhost), default port is 5000. If that port is already in use, you can deploy it on higher port values (5001, 5002…​). Nevertheless, we explain <a href="#testing_phase">later</a> the testing process as you need to complete the next step before.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Your server must accept one argument when running it. The argument will be the port number (as an integer). This will be used for CobiGen in order to handle blocked ports when deploying your server. Check this <a href="devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen-devon4node-server/blob/master/cobigen-nest-server/src/main.ts#L47">code</a> to see how we implemented that argument on our NestJS server.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_cobigen-plug-in">CobiGen plug-in</h6>
<div class="paragraph">
<p>You will have to create a new CobiGen plug-in that connects to the server. But <strong>do not worry</strong>, you will not have to implement anything new. We have a CobiGen plug-in template available, the only changes needed are renaming files and setting some properties on the pom.xml. Please follow these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Get the CobiGen plug-in template from <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen-template-plugin">here</a>. It is a template repository (new GitHub feature), so you can click on "Use this template" as shown below:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/usePluginTemplate.png"><img src="images/howtos/todo-plugin/usePluginTemplate.png" alt="Plugin CobiGen template" width="550"></a>
</div>
</div>
</li>
<li>
<p>Name your repo as <code>cobigen-name-plugin</code> where <code>name</code> can be python, rust, go…​ In our case we will create a <code>nest</code> plug-in. It will create a repo with only one commit which contains all the needed files.</p>
</li>
<li>
<p>Clone your just created repo and import folder <code>cobigen-todoplugin</code> as a Maven project on any Java IDE, though we recommend you devonfw ;)</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/importPluginEclipse.png"><img src="images/howtos/todo-plugin/importPluginEclipse.png" alt="Import plugin" width="450"></a>
</div>
</div>
</li>
<li>
<p>Rename all the <code>todoplugin</code> folders, files and class names to <code>nameplugin</code>. In our case <code>nestplugin</code>. In Eclipse you can easily rename by right clicking and then refactor → rename:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/renamePlugin.png"><img src="images/howtos/todo-plugin/renamePlugin.png" alt="Rename plugin" width="450"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We recommend you to select all the checkboxes
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/renameCheckbox.png"><img src="images/howtos/todo-plugin/renameCheckbox.png" alt="Rename checkbox" width="450"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Remember to change in <code>src/main/java</code> and <code>src/test/java</code> all the package, files and class names to use your plug-in name. The final result would be:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/packageStructure.png"><img src="images/howtos/todo-plugin/packageStructure.png" alt="Package structure" width="300"></a>
</div>
</div>
</li>
<li>
<p>Now we just need to change some strings, this is needed for CobiGen to register all the different plugins (they need unique names). In class <code>TodoPluginActivator</code> (in our case <code>NestPluginActivator</code>), change all the <code>todo</code> to your plug-in name. See below the 3 strings that need to be changed:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/pluginActivator.png"><img src="images/howtos/todo-plugin/pluginActivator.png" alt="Plugin activator" width="450"></a>
</div>
</div>
</li>
<li>
<p>Finally, we will change some properties from the <code>pom.xml</code> of the project. These properties define the server (external process) that is going to be used:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Inside <code>pom.xml</code>, press <em>Ctrl + F</em> to perform a find and replace operation. Replace all <code>todo</code> with your plugin name:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/setPomProperties.png"><img src="images/howtos/todo-plugin/setPomProperties.png" alt="Pom properties" width="550"></a>
</div>
</div>
</li>
<li>
<p>We are going to explain the server properties:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>artifactId</code>: This is the name of your plug-in, that will be used for a future release on Maven Central.</p>
</li>
<li>
<p>plugin.name: does not need to be changed as it uses the property from the <code>artifactId</code>. When connecting to the server, it will send a request to <code>localhost:5000/{plugin.name}plugin/isConnectionReady</code>, that is why it is important to use an unique name for the plug-in.</p>
</li>
<li>
<p>server.name: This defines how the server executable (<em>.exe</em>) file will be named. This <em>.exe</em> file contains all the needed resources for deploying the server. You can use any name you want.</p>
</li>
<li>
<p>server.version: You will specify here the server version that needs to be used. The <em>.exe</em> file will be named as <code>{server.name}-{server.version}.exe</code>.</p>
</li>
<li>
<p>server.url: This will define from where to download the server. We <strong>really</strong> recommend you using NPM which is a package manager we know it works well. We explain <a href="#release_server">here</a> how to release the server on NPM. This will download the <em>.exe</em> file for Windows.</p>
</li>
<li>
<p>server.url.linux: Same as before, but this should download the <em>.exe</em> file for Linux systems. If you do not want to implement a Linux version of the plug-in, just use the same URL from Windows or MacOS.</p>
</li>
<li>
<p>server.url.macos: Same as before, but this should download the <em>.exe</em> file for MacOS systems. If you do not want to implement a MacOS version of the plug-in, just use the same URL from Linux or Windows.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_testing-phase">Testing phase</h5>
<div class="paragraph">
<p>Now that you have finished with the implementation of the server and the creation of a new CobiGen plug-in, we are going to explain how you can test that everything works fine:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Deploy the server on port 5000.</p>
</li>
<li>
<p>Run <code>mvn clean test</code> on the CobiGen-plugin or run the JUnit tests directly on Eclipse.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If the server and the plug-in are working properly, some tests will pass and other will fail (we need to tweak them).</p>
</li>
<li>
<p>If every test fails, something is wrong in your code.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In order to fix the failing tests, go to <code>src/test/java</code>. The failing tests make use of sample input files that we added in sake of example:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/failingTest.png"><img src="images/howtos/todo-plugin/failingTest.png" alt="Pom properties" width="550"></a>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Replace those files (on <code>src/test/resources/testadata/unittest/files/…​</code>) with the correct input files for your server.</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_releasing">Releasing</h5>
<div class="paragraph">
<p>Now that you have already tested that everything works fine, we are going to explain how to release the server and the plug-in.</p>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_release-the-server">Release the server</h6>
<div class="paragraph">
<p>We are going to use <a href="#devonfw-guide/cobigen.wiki_https://www.npmjs.com/">NPM</a> to store the executable of our server. Even though NPM is a package manager for JavaScript, it can be used for our purpose.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Get the CobiGen server template from <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen-template-server">here</a>. It is a template repository (new GitHub feature), so you can click on "Use this template" as shown below:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/useServerTemplate.png"><img src="images/howtos/todo-plugin/useServerTemplate.png" alt="Server CobiGen template" width="550"></a>
</div>
</div>
</li>
<li>
<p>Name your repo as <code>cobigen-name-server</code> where <code>name</code> can be python, rust, go…​ In our case we will create a <code>nest</code> plug-in. It will create a repo with only one commit which contains all the needed files.</p>
</li>
<li>
<p>Clone your just created repo and go to folder <code>cobigen-todo-server</code>. It will just contain two files: <em>ExternalProcessContract.yml</em> is the OpenAPI definition which you can modify with your own server definition (this step is optional), and <em>package.json</em> is a file needed for NPM in order to define where to publish this package:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-JSON" data-lang="JSON">{
  "name": "@devonfw/cobigen-todo-server",
  "version": "1.0.0",
  "description": "Todo server to implement the input reader and merger for CobiGen",
  "author": "CobiGen Team",
  "license": "Apache"
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those are the default properties. This would push a new package <code>cobigen-todo-server</code> on the <code>devonfw</code> organization, with version 1.0.0. We have no restrictions here, you can use any organization, though we always recommend devonfw.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Remember to change all the <code>todo</code> to your server name.
</td>
</tr>
</tbody></table>
</div>
<div class="ulist">
<ul>
<li>
<p>Add your executable file into the <code>cobigen-todo-server</code> folder, just like below. As we said previously, this <em>.exe</em> is the server ready to be deployed.</p>
<div class="listingblock">
<div class="content">
<pre>cobigen-template-server/
 |- cobigen-todo-server/
   |- ExternalProcessContract.yml
   |- package.json
   |- todoserver-1.0.0.exe</pre>
</div>
</div>
</li>
<li>
<p>Finally, we have to publish to NPM. If you have never done it, you can follow this <a href="#devonfw-guide/cobigen.wiki_https://www.freecodecamp.org/news/how-to-make-a-beautiful-tiny-npm-package-and-publish-it-2881d4307f78/">tutorial</a>. Basically you need to login into NPM and run:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">cd cobigen-todo-server/
npm publish --access=public</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To release Linux and MacOS versions of your plug-in, just add the suffix into the package name (e.g. <code>@devonfw/cobigen-todo-server-linux</code>)
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>That’s it! You have published the first version of your server. Now you just need to modify the properties defined on the pom of your CobiGen plug-in. Please see next section for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_releasing-cobigen-plug-in">Releasing CobiGen plug-in</h6>
<div class="ulist">
<ul>
<li>
<p>Change the pom.xml to define all the properties. You can see below a final example for <code>nest</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-XML" data-lang="XML">...
   &lt;groupId&gt;com.devonfw.cobigen&lt;/groupId&gt;
   &lt;artifactId&gt;nestplugin&lt;/artifactId&gt;
   &lt;name&gt;CobiGen - Nest Plug-in&lt;/name&gt;
   &lt;version&gt;1.0.0&lt;/version&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;
   &lt;description&gt;CobiGen - nest Plug-in&lt;/description&gt;

   &lt;properties&gt;
      &lt;!-- External server properties --&gt;
      &lt;plugin.name&gt;parent&lt;/plugin.name&gt;
      &lt;server.name&gt;nestserver&lt;/server.name&gt;
      &lt;server.version&gt;1.0.0&lt;/server.version&gt;
      &lt;server.url&gt;https\://registry.npmjs.org/@devonfw/cobigen-nest-server/-/cobigen-nest-server-${server.version}.tgz&lt;/server.url&gt;
      &lt;server.url.linux&gt;https\://registry.npmjs.org/@devonfw/cobigen-nest-server-linux/-/cobigen-nest-server-linux-${server.version}.tgz&lt;/server.url.linux&gt;
      &lt;server.url.macos&gt;https\://registry.npmjs.org/@devonfw/cobigen-nest-server-macos/-/cobigen-nest-server-macos-${server.version}.tgz&lt;/server.url.macos&gt;
...</code></pre>
</div>
</div>
</li>
<li>
<p>Deploy to Maven Central.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_templates-creation">Templates creation</h5>
<div class="paragraph">
<p>After following above steps, we now have a CobiGen plug-in that connects to a server (external process) which reads your input files, returns a model and is able to merge files.</p>
</div>
<div class="paragraph">
<p>However, we need a key component for our plug-in to be useful. We need to define templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fork our CobiGen main repository, from <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen.git">here</a> and clone it into your PC. Stay in the <code>master</code> branch and import into your IDE <code>cobigen-templates\templates-devon4j</code>. Set the Java version of the project to 1.8 if needed.</p>
</li>
<li>
<p>Create a new folder on <code>src/main/templates</code>, this will contain all your templates. You can use any name, but please use underscores as separators. In our case, we created a folder <code>crud_typescript_angular_client_app</code> to generate an Angular client from a TypeORM entity (NodeJS entity).</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/templatesProject.png"><img src="images/howtos/todo-plugin/templatesProject.png" alt="Templates project" width="450"></a>
</div>
</div>
</li>
<li>
<p>Inside your folder, create a <code>templates</code> folder. As you can see below, the folder structure of the generated files starts here (the sources). Also we need a configuration file <code>templates.xml</code> that should be on the same level as <code>templates/</code> folder. For now, copy and paste a <code>templates.xml</code> file from any of the templates folder.</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/templatesInside.png"><img src="images/howtos/todo-plugin/templatesInside.png" alt="Templates project" width="450"></a>
</div>
</div>
</li>
<li>
<p>Start creating your own templates. Our default templates language is Freemarker, but you can also use Velocity. Add the extension to the file (<code>.ftl</code>) and start developing templates! You can find useful documentation <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/cobigen-templates_helpful-links">here</a>.</p>
</li>
<li>
<p>After creating all the templates, you need to modify <code>context.xml</code> which is located on the root of <code>src/main/templates</code>. There you need to define a trigger, which is used for CobiGen to know when to trigger a plug-in. I recommend you to copy and paste the following trigger:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-XML" data-lang="XML">  &lt;trigger id="crud_typescript_angular_client_app" type="nest" templateFolder="crud_typescript_angular_client_app"&gt;
    &lt;matcher type="fqn" value="([^\.]+).entity.ts"&gt;
      &lt;variableAssignment type="regex" key="entityName" value="1"/&gt;
      &lt;variableAssignment type="regex" key="component" value="1"/&gt;
      &lt;variableAssignment type="constant" key="domain" value="demo"/&gt;
    &lt;/matcher&gt;
  &lt;/trigger&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Change <code>templateFolder</code> to your templates folder name. <code>id</code> you can use any, but it is recommendable to use the same as the template folder name. <code>type</code> is the <code>TRIGGER_TYPE</code> we defined above on the <code>NestPluginActivator</code> class. On <code>matcher</code> just change the <code>value</code>: <code>([^\.]+).entity.ts</code> means that we will only accept input files that contain <code>anyString.entity.ts</code>. This improves usability, so that users only generate using the correct input files. You will find more info about <code>variableAssignment</code> <a href="devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/cobigen-core_configuration.html#variableassignment-node">here</a>.</p>
</li>
<li>
<p>Finally, is time to configure <code>templates.xml</code>. It is needed for organizing templates into increments, please take a look into this <a href="devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/cobigen-core_configuration.html#templates-configuration">documentation</a>.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_create-external-plugin.asciidoc_testing-templates">Testing templates</h6>
<div class="ulist">
<ul>
<li>
<p>When you have finished your templates you will like to test them. On the templates-devon4j <code>pom.xml</code> remove the SNAPSHOT from the version (in our case the version will be 3.1.8). Run <code>mvn clean install -DskipTests</code> on the project. We skip tests because you need special permissions to download artifacts from our Nexus. Remember the version that has just been installed:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/templatesSnapshot.png"><img src="images/howtos/todo-plugin/templatesSnapshot.png" alt="Templates snapshot version" width="550"></a>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We always recommend using the devonfw console, which already contains a working Maven version.
</td>
</tr>
</tbody></table>
</div>
<div class="ulist">
<ul>
<li>
<p>Now we have your last version of the templates ready to be used. We need to use that latest version in CobiGen. We will use the CobiGen CLI that you will find in your cloned repo, at <code>cobigen-cli/cli</code>. Import the project into your IDE.</p>
</li>
<li>
<p>Inside the project, go to <code>src/main/resources/pom.xml</code>. This pom.xml is used on runtime in order to install all the CobiGen plug-ins and templates. Add there your latest templates version and the previously created plug-in:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/cliPom.png"><img src="images/howtos/todo-plugin/cliPom.png" alt="CLI pom" width="450"></a>
</div>
</div>
</li>
<li>
<p>Afterwards, run <code>mvn clean install -DskipTests</code> and CobiGen will get your plug-ins. Now you have three options to test templates:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using Eclipse run as:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Inside Eclipse, you can run the CobiGen-CLI as a Java application. Right click class <code>CobiGenCLI.java</code> → run as → run configurations…​ and create a new Java application as shown below:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/runConfigurations.png"><img src="images/howtos/todo-plugin/runConfigurations.png" alt="Create configuration" width="450"></a>
</div>
</div>
</li>
<li>
<p>That will create a <code>CobiGenCLI</code> configuration where we can set arguments to the CLI. Let’s first begin with showing the CLI version, which should print a list of all plug-ins, including ours.</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/runAsArgs.png"><img src="images/howtos/todo-plugin/runAsArgs.png" alt="Run version" width="450"></a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Text" data-lang="Text"> ...
 name:= propertyplugin version = 2.0.0
 name:= jsonplugin version = 2.0.0
 name:= templates-devon4j version = 3.1.8
 name:= nestplugin version = 1.0.0
 ...</code></pre>
</div>
</div>
</li>
<li>
<p>If that worked, now you can send any arguments to the CLI in order to generate with your templates. Please follow <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/howto_Cobigen-CLI-generation">this guide</a> that explains all the CLI commands.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Modify the already present JUnit tests on the CLI project: They test the generation of templates from multiple plug-ins, you can add your own tests and input files.</p>
</li>
<li>
<p>Use the CLI jar to execute commands:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The <code>mvn clean install -DskipTests</code> command will have created a Cobigen.jar inside your target folder (<em>cobigen-cli/cli/target</em>). Open the jar with any unzipper and extract to the current location <em>class-loader-agent.jar</em>, <em>cobigen.bat</em> and <em>cg.bat</em>:</p>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/todo-plugin/extractFilesCLI.png"><img src="images/howtos/todo-plugin/extractFilesCLI.png" alt="Extract files" width="450"></a>
</div>
</div>
</li>
<li>
<p>Now you can run any CobiGen CLI commands using a console. <a href="#devonfw-guide/cobigen.wiki_https://github.com/devonfw/cobigen/wiki/howto_Cobigen-CLI-generation">This guide</a> explains all the CLI commands.</p>
<div class="imageblock">
<div class="content">
<a class="image" href="" images="" howtos="" todo-plugin="" runningcli.png"=""><img src="images/howtos/todo-plugin/runningCLI.png" alt="Run CLI" width="450"></a>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navydevon4net-cobigen-guide"><span class="navy">devon4net Cobigen Guide</span></h5>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navyoverview"><span class="navy">Overview</span></h6>
<div class="paragraph">
<p>In this guide we will explain how to generate a new WebApi project from an OpenAPI 3.0.0 specification. This  means that we are going to use a “contract first” strategy. This is going to be possible due to these type of files that contain all the information about entities, operations, etc…</p>
</div>
<div class="paragraph">
<p>In order to make it work we are using <a href="https://github.com/devonfw/cobigen">CobiGen</a>, a powerful tool for generating source code. CobiGen allows users to generate all the structure and code of the components, helping to save a lot of time otherwise wasted on repetitive tasks.</p>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navygetting-things-ready"><span class="navy">Getting things ready</span></h6>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navydevonfw-ide"><span class="navy">devonfw-ide</span></h7>
<div class="paragraph">
<p>First, we will install the devonfw-ide. It is a tool that will setup your IDE within minutes. Please follow the install guide <a href="https://github.com/devonfw/ide/blob/master/documentation/setup.asciidoc">here</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navydevon4net-templates"><span class="navy">devon4net Templates</span></h7>
<div class="paragraph">
<p>We are going to use the template of devon4net as a base to generate all the code, so what we have to do now is to download said template using the following steps.</p>
</div>
<div class="paragraph">
<p>First of all you have to set up all the environment for .NET, you can do this using <a href="https://devon4net.github.io/environment.html">the following tutorial</a>. Next we are going to create a new folder where we want to have the <code>WebAPI</code> project, lastly we are going to open the terminal there.</p>
</div>
<div class="paragraph">
<p>Type the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`dotnet new -i Devon4Net.WebAPI.Template`</pre>
</div>
</div>
<div class="paragraph">
<p>and then:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`dotnet new Devon4NetAPI`</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navyopenapi-file"><span class="navy">OpenAPI File</span></h7>
<div class="paragraph">
<p>In order to let CobiGen generate all the files, we first have to make some modifications to our OpenAPI file.</p>
</div>
<div class="paragraph">
<p>It is obligatory to put the <em>“x-rootpackage”</em> tag to indicate where CobiGen will place the generated files as well as the <em>"x-component"</em> tags for each component, keep in mind that due to CobiGen’s limitations each component <strong><em>must</em></strong> have its own entity.</p>
</div>
<div class="paragraph">
<p>You can read more information about how to configure your OpenAPI file and a working example <a href="https://github.com/devonfw/cobigen/wiki/cobigen-openapiplugin#full-example">here</a>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navygenerating-files"><span class="navy">Generating files</span></h6>
<div class="paragraph">
<p>Cobigen allow us to generate the files in two different ways. One of them is using Eclipse which it can be done by using the its graphical interface. The other way to generate the code is using the Cobigen CLI tool.</p>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navygenerating-files-through-eclipse"><span class="navy">Generating files through Eclipse</span></h7>
<div class="paragraph">
<p>In order to generate the files using Eclipse we need to follow some simple steps.</p>
</div>
<div class="paragraph">
<p>First we are going to import our basic devon4net WebAPI Project into Eclipse. to do so open Eclipse with the “eclipse-main.bat” file that can be found in the devon distribution root folder. Once we are inside of Eclipse we go to <strong>File &gt; Open projects from file system…​</strong> and, under "Directory", search for your project.</p>
</div>
<div id="asciidoc_devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_img-cobigen" class="imageblock">
<div class="content">
<a class="image" href="=" images="" howtos="" devon4net="" project_selection.png""=""><img src="images/howtos/devon4net/Project_selection.png" alt="cobigen" width="=" 600""=""></a>
</div>
</div>
<div class="paragraph">
<p>Next we copy our OpenAPI file into the root folder of the project.</p>
</div>
<div id="asciidoc_devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_img-cobigen_2" class="imageblock">
<div class="content">
<a class="image" href="=" images="" howtos="" devon4net="" openapi_file_root_folder.png""=""><img src="images/howtos/devon4net/OpenAPI_file_root_folder.png" alt="cobigen" width="=" 300""=""></a>
</div>
</div>
<div class="paragraph">
<p>And then we right click on OpenAPI file and then select <strong>CobiGen &gt; Generate…​</strong> It will display a window like this:</p>
</div>
<div id="asciidoc_devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_img-cobigen_3" class="imageblock">
<div class="content">
<a class="image" href="=" images="" howtos="" devon4net="" cobigen_generate0.png""=""><img src="images/howtos/devon4net/cobigen_generate0.png" alt="cobigen" width="=" 800""=""></a>
</div>
</div>
<div class="paragraph">
<p>To select all .NET features choose <strong>CRUD devon4net Server</strong> otherwise you can select only those that interest you.</p>
</div>
<div id="asciidoc_devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_img-cobigen_4" class="imageblock">
<div class="content">
<a class="image" href="=" images="" howtos="" devon4net="" cobigen_generate1.png"=""><img src="images/howtos/devon4net/cobigen_generate1.png" alt="cobigen" width="=" 800""=""></a>
</div>
</div>
<div class="paragraph">
<p>Ones you select all the files that you want to generate, click on the <em>“Finish”</em> button to generate all the source code.</p>
</div>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navygenerating-files-through-cobigen-cli"><span class="navy">Generating files through Cobigen CLI</span></h7>
<div class="paragraph">
<p>In order to generate the files using the Cobigen CLI it is needed to do the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to devonfw distribution folder</p>
</li>
<li>
<p>Run <strong>console.bat</strong>, this will open a console.</p>
</li>
<li>
<p>Go to the folder you downloaded the <strong>devon4net template</strong> and your <strong>yml</strong> file.</p>
</li>
<li>
<p>Run the command:</p>
<div class="literalblock">
<div class="content">
<pre>cobigen generate {yourOpenAPIFile}.yml</pre>
</div>
</div>
</li>
<li>
<p>A list of increments will be printed so that you can start the generation. It has to be selected <strong>CRUD devon4net Server</strong> increment.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navyconfiguration"><span class="navy">Configuration</span></h6>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navydata-base"><span class="navy">Data base</span></h7>
<div class="paragraph">
<p>Cobigen is generating an empty context that has to be filled with manually in order to be able to work with the database. The context can be found in <code><strong>[Project_Name]/Devon4Net.WebAPI.Implementation/Domain/Database/CobigenContext.cs</strong></code>.</p>
</div>
<div id="asciidoc_devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_img-cobigen_5" class="imageblock">
<div class="content">
<a class="image" href="=" images="" howtos="" devon4net="" cobigencontextlocation.png"=""><img src="images/howtos/devon4net/CobigenContextLocation.png" alt="cobigen" width="=" 350""=""></a>
</div>
</div>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto_devon4net.asciidoc_navyrun-the-application"><span class="navy">Run the application</span></h7>
<div class="paragraph">
<p>After the configuration of the database, open a terminal in path: <strong>[Project_Name]/Devon4Net.Application.WebAPI</strong> and then type:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dotnet run</pre>
</div>
</div>
<div class="paragraph">
<p>This will deploy our application in our localhost with the port 8082, so when you click <a href="https://localhost:8082/swagger/index.html">here</a> (<a href="https://localhost:8082/swagger" class="bare">https://localhost:8082/swagger</a>) you can see, in swagger, all the services and the data model.</p>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_update_CobiGen.asciidoc">How to update CobiGen</h4>
<div class="paragraph">
<p>In order to update CobiGen from our devonfw distribution, we have two options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open Eclipse, click on <em>Help</em> → <em>Check for updates</em></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/update_CobiGen/check_updates.png"><img src="images/howtos/update_CobiGen/check_updates.png" alt="Check updates" width="450"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select all the CobiGen plugins listed and click on <em>Next</em>.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/update_CobiGen/all_updates.png"><img src="images/howtos/update_CobiGen/all_updates.png" alt="All the updates" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>If this option is not working properly, then you can try the second option:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open Eclipse, click on <em>Help</em> → <em>About Eclipse IDE</em>:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/update_CobiGen/about_eclipse.png"><img src="images/howtos/update_CobiGen/about_eclipse.png" alt="About Eclipse" width="450"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on <em>Installation details</em>:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/update_CobiGen/installation_details.png"><img src="images/howtos/update_CobiGen/installation_details.png" alt="Installation details" width="350"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select all the CobiGen plugins and click on <em>Update</em>:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/update_CobiGen/details_all_udpates.png"><img src="images/howtos/update_CobiGen/details_all_udpates.png" alt="All updates details" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>After the update process finishes, remember to restart Eclipse.</p>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto_update_cobigen.asciidoc_updating-templates">Updating templates:</h5>
<div class="paragraph">
<p>To update your CobiGen templates to the latest version, you just need to do one step:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right click any file on your package explorer, click on <em>CobiGen</em> → <em>Update templates</em>, then click on <em>download</em>:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/howtos/update_CobiGen/update_templates.png"><img src="images/howtos/update_CobiGen/update_templates.png" alt="Update templates" width="450"></a>
</div>
</div>
<div class="paragraph">
<p>Now you will have the latest templates ready!</p>
</div>
<div class="paragraph">
<p>Unresolved directive in cobigen.wiki/master-cobigen.asciidoc - include::howto-Cobigen-CLI-generation.asciidoc[leveloffset=3]</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-CobiGen-PoC-E2E.asciidoc">End to End POC Code generation using Entity class</h4>
<div class="paragraph">
<p>This article helps to create a sample application using cobigen.</p>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_prerequisites">Prerequisites</h5>
<div class="paragraph">
<p>Download and install devonfw IDE <a href="https://devonfw.com/website/pages/docs/devonfw-ide-introduction.asciidoc.html#setup.asciidoc">here</a>,</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_steps-to-create-a-sample-project-using-cobigen">Steps to create a Sample Project using Cobigen</h5>
<div class="paragraph">
<p>The <code>HOW_TO</code> is divided in 2 parts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>BE</code>-Back End generator (<code>DB</code> + <code>DAO</code> + services) – CONTRACT FIRST APPROACH</p>
</li>
<li>
<p><code>FE</code>-Front End generator (Web App Angular + Ionic App) – CONTRACT FIRST APPROACH</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image63.png" alt="cobigen code-first generation"></span></p>
</div>
<div class="paragraph">
<p>So, ready to go! We’re going to start from the <code>BE</code> part …</p>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_back-end">Back End</h6>
<div class="paragraph">
<p>Under your path installation of DevonFW, you can find the <em>eclipse-main.bat</em> script and you can run it:<br>
run <em>installation_path</em>\eclipse-main.bat</p>
</div>
<div class="paragraph">
<p>It will open eclipse</p>
</div>
<div class="paragraph">
<p>Create a project using a command from the command prompt.<br>
To made it, it’s necessary to open a CMD and open the folder where it’s installed DevonFW and launch this command under the path <em>workspaces/main</em>.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To facilitate this step, you can go from your "<em>File Explorer</em>" under <strong>workspaces/main</strong> folder and with the right button of the mouse, choose "<em>Open devonfw CMD shell here</em>"
<span class="image"><img src="images/howtos/e2e_gen/image85.png" alt="eclipse devon"></span>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then launch this command from CMD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">devon java create com.example.domain.myapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Import the project to eclipse as maven project
<span class="image"><img src="images/howtos/e2e_gen/image14.png" alt="eclipse devon"></span></p>
</div>
<div class="paragraph">
<p>Click <strong>FINISH</strong></p>
</div>
<div class="paragraph">
<p>Now We have the following 4 projects.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image15.png" alt="eclipse package explorer"></span></p>
</div>
<div class="paragraph">
<p><strong>BEFORE to start to create an Entity class, remember to create the tables, for this POC it’s used an H2 Database!</strong></p>
</div>
<div class="paragraph">
<p>Create a new <strong>SQL</strong> <strong>file</strong> (<code>i.e: V0002__CreateTables_myapp.sql</code>) inside <em>`myapp-core`</em> , under the folder path <em>`/myapp-core/src/main/resources/db/migration/1.0`</em> and insert the following script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE TABLE EMPLOYEE (
id BIGINT auto_increment, modificationCounter INTEGER NOT NULL,
employeeid BIGINT auto_increment,
name VARCHAR(255),
surname VARCHAR(255),
email VARCHAR(255),
PRIMARY KEY (employeeid)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>WARNING 1</em></strong>: please note that there in that folder is present only one file, 0001, and you have to add the other files in progressive number order (i.e. 0002)!<br>
<strong><em>WARNING 2</em></strong>: please note that there are 2 underscore in the name!</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image64.png" alt="sql file"></span></p>
</div>
<div class="paragraph">
<p>Now create another SQL file (<code>i.e: V0003__PopulateTables-myapp.sql</code>) and add following script about the INSERT in order to populate the table created before.
The script must be inserted at the same path used before: <em>`/myapp-core/src/main/resources/db/migration/1.0`</em></p>
</div>
<div class="paragraph">
<p><strong><em>WARNING 1</em></strong>: please note that there in that folder is present only one file, 0001, and you have to add the other files in progressive number order (i.e. 0003)!<br>
<strong><em>WARNING 2</em></strong>: please note that there are 2 underscore in the name!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">INSERT INTO EMPLOYEE (id, modificationCounter, employeeid, name, surname,email) VALUES (1, 1, 1, 'John','Doe','john.doe@example.com');
INSERT INTO EMPLOYEE (id, modificationCounter, employeeid, name, surname,email) VALUES (2, 2, 2, 'Tom','Smith', 'tom.smith@example.com');
INSERT INTO EMPLOYEE (id, modificationCounter, employeeid, name, surname,email) VALUES (3, 3, 3, 'Joe','Schmoe', 'joe.schmoe@example.com');</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image65.png" alt="sql insert"></span></p>
</div>
<div class="paragraph">
<p><strong>Let’s create the Entity Class for the code generation</strong></p>
</div>
<div class="paragraph">
<p>Create a package <strong>employeemanagement.dataaccess.api</strong> under the folder <em>`myapp-core`</em>.<br>
Note: It is important to follow this naming convention for CobiGen to work properly.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image66.png" alt="package"></span></p>
</div>
<div class="paragraph">
<p>Now create a <code>JPA</code> Entity class in this package</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Column;
@Entity
@javax.persistence.Table(name = "EMPLOYEE")
public class EmployeeEntity {
  @Column(name = "EMPLOYEEID")
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long employeeId;
  @Column(name = "NAME")
  private String name;
  @Column(name = "SURNAME")
  private String surname;
  @Column(name = "EMAIL")
  private String email;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>then generate <code>getters</code> and <code>setters</code> for all attribute, as you can see in the image below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image67.png" alt="<code>getter &amp; setter</code>"></span>
<span class="image"><img src="images/howtos/e2e_gen/image68.png" alt="<code>getter &amp; setter</code>"></span></p>
</div>
<div class="paragraph">
<p>Use Cobigen to generate code. Right click on <code>EmployeeEntity</code>. CobiGen → Generate</p>
</div>
<div class="paragraph">
<p>If it will ask you to download the templates, click on <em>update</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image19.png" alt="cobigen generate"></span></p>
</div>
<div class="paragraph">
<p>It will automatically download the latest version of <em>CobiGen_Templates</em>.</p>
</div>
<div class="paragraph">
<p><strong>Attention:</strong> If you want to adapt the CobiGen_Templates, (normally this is not necessary), you will find at the end of this document (in a separate chapter) a tutorial on how to import them and adapt them!</p>
</div>
<div class="paragraph">
<p>Click on all the option selected as below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image20.png" alt="cobigen option selection"></span></p>
</div>
<div class="paragraph">
<p>Click on finish. Below Screen would be seen. Click on continue</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image21.png" alt="cobigen finish"></span></p>
</div>
<div class="paragraph">
<p><strong>The entire <span class="underline"><code>BE</code> layer</span> structure having <code>CRUD</code> operation methods will be auto generated.</strong></p>
</div>
<div class="paragraph">
<p>Some classes will be generated on the api part (<em>`myapp-api`)</em>, normally it will be interfaces, as shown below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image22.png" alt="be layer"></span></p>
</div>
<div class="paragraph">
<p>Some other classes will be generated on the core part (<em>`myapp-core`)</em>, normally it will be implementations as shown below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image23.png" alt="core folder"></span></p>
</div>
<div class="paragraph">
<p>The last step is to add the Cross Domain process, because when you are developing Javascript client and server application separately, you have to deal with cross domain issues.</p>
</div>
<div class="paragraph">
<p>So, we need to prepare server side to accept request from other domains. We need to cover the following points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Accept request from other domains.</p>
</li>
<li>
<p>Accept devonfw used headers like <code>X-CSRF-TOKEN</code> or <code>correlationId</code>.</p>
</li>
<li>
<p>Be prepared to receive secured request (cookies).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To do this it’s necessary to add two kind of dependecies in the pom.xml of the <em>`myapp-core`</em> folder, at the end of the list of dependecies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;dependency&gt;
      &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
      &lt;artifactId&gt;devon4j-starter-security-cors&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
      &lt;artifactId&gt;devon4j-starter-security-csrf&lt;/artifactId&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image70.png" alt="pom xml"></span></p>
</div>
<div class="paragraph">
<p>Next step is to add some properties under your <em>application.properties</em> file, in the <code>myapp-core</code> folder in the <em>resources/config</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">security.cors.spring.allowCredentials=true
security.cors.spring.allowedOriginPatterns=*
security.cors.spring.allowedHeaders=*
security.cors.spring.allowedMethods=OPTIONS,HEAD,GET,PUT,POST,DELETE,PATCH
security.cors.pathPattern=/**</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image71.png" alt="application properties"></span></p>
</div>
<div class="paragraph">
<p><strong>BEFORE to generate the <code>FE</code></strong>, please start the Tomcat server to check that <code>BE</code> Layer has been generated properly.</p>
</div>
<div class="paragraph">
<p>To start a server you just have to right click on <em>`SpringBootApp.java`</em> → <em>run as → Java Application</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image24.png" alt="Eclipse run as"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image69.png" alt="Spring boot run"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image26.png" alt="Spring boot run"></span></p>
</div>
<div class="paragraph">
<p><strong><code>BE</code> DONE</strong></p>
</div>
<div class="paragraph">
<p>Last but not least: We make a quick REST services test !</p>
</div>
<div class="paragraph">
<p>See in the <em>application.properties</em> the TCP Port and the <code>PATH</code></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image27.png" alt="application properties"></span></p>
</div>
<div class="paragraph">
<p>Now compose the Rest service URL:</p>
</div>
<div class="paragraph">
<p><strong>service class &lt;path&gt;/&lt;service method path&gt;</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;server&gt; refers to server with port no. (ie: localhost:8081)</p>
</li>
<li>
<p>&lt;app&gt; is in the <em>application.properties</em> (empty in our case, see above)</p>
</li>
<li>
<p>&lt;rest service class path&gt; refers to <code>EmployeemanagementRestService</code>: (i.e: /employeemanagement/v1)</p>
</li>
<li>
<p>&lt;service method path&gt;/employee/{id}  (i.e: for  <code>getEmployee</code> method)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image28.png" alt="url mapping"></span></p>
</div>
<div class="paragraph">
<p>URL of <code>getEmployee</code> for this example is:</p>
</div>
<div class="paragraph">
<p>For all employees (<code>POST</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:8081/services/rest/employeemanagement/v1/employee/search</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the specific employee (<code>GET</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:8081/services/rest/employeemanagement/v1/employee/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now download <a href="https://www.getpostman.com/apps">Postman</a> to test the rest services.</p>
</div>
<div class="paragraph">
<p>Once done, you have to create a <code>POST</code> Request for the LOGIN and insert in the body the JSON containing the username and password <em>admin</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image72.png" alt="postman"></span></p>
</div>
<div class="paragraph">
<p><strong><em>WARNING</em></strong>: please note that the body of the request must be JSON type!</p>
</div>
<div class="paragraph">
<p>Once done with success (<strong>Status: 200 OK</strong>) - <em>you can see the status of the response in the top right corner of Postman</em> - we can create a NEW <code>GET</code> Request in order to get one employee.</p>
</div>
<div class="paragraph">
<p>To do this you have to create a new request in Postman, <code>GET</code> type, and insert the URL specified before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:8081/services/rest/employeemanagement/v1/employee/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thenk click on <strong>"SEND"</strong> button…​</p>
</div>
<div class="paragraph">
<p>Now you have to check that response has got <strong>Status: 200 OK</strong> and to see the below Employee</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image73.png" alt="postman"></span></p>
</div>
<div class="paragraph">
<p>Now that We have successfully tested the <code>BE</code> is time to go to create the <code>FE</code> !</p>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_front-end">Front End</h6>
<div class="paragraph">
<p>Let’s start now with angular Web and then Ionic app.</p>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_angular-web-app">Angular Web App</h7>
<div class="paragraph">
<p>To generate angular structure, download or clone <strong>devon4ng-application-template</strong> from</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">https://github.com/devonfw/devon4ng-application-template</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image74.png" alt="devon dist folder"></span></p>
</div>
<div class="paragraph">
<p>IMPORTANT when you download the zip of the source code of your <code>FE</code> application, the name of the app MUST BE <strong>devon4ng-application-template</strong> and you can extract it in your DevonFW folder, under <em>workspaces/main</em></p>
</div>
<div class="paragraph">
<p>Once downloaded the <code>APP</code>, you can open the application with your favourite IDE (Intellij, Visual Studio Code, …​)<br>
Instead, if you want to open this project with Eclipse, you have to follow these steps:<br></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right click on the left part of Eclipse, anch click on "Import":
<span class="image"><img src="images/howtos/e2e_gen/image83.png" alt="import"></span></p>
</li>
<li>
<p>Click on "Projects from Folder or Archive"
<span class="image"><img src="images/howtos/e2e_gen/image82.png" alt="import"></span></p>
</li>
<li>
<p>Select your folder where you have saved the Angular <code>FE</code> Application, under <em>workspaces/main</em>. Wait that all the dependecies are charged and then click on "Finish"
<span class="image"><img src="images/howtos/e2e_gen/image84.png" alt="import"></span></p>
</li>
<li>
<p>At the end, you will have a structure like this:
<span class="image"><img src="images/howtos/e2e_gen/image86.png" alt="import"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once done, right click on <code>EmployeeEto</code>.java file present under the package <em>com.devonfw.poc.employeemanagement.logic.api.to</em>, in the Back End part (<em>`myapp-core</em> module`).
Click on the selected options as seen in the screenshot:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image37.png" alt="eclipse generate"></span></p>
</div>
<div class="paragraph">
<p>Click on Finish</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image38.png" alt="eclipse"></span></p>
</div>
<div class="paragraph">
<p>The entire <code>ANGULAR</code> structure has been auto generated. The generated code will be merged to the existing.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image39.png" alt="angular <code>ee</code> layer"></span></p>
</div>
<div class="paragraph">
<p>IMPORTANT now you have to check in the <strong><em>app-routing.module.ts</em></strong> file, if the content corresponding to the code below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';
import { AuthGuard } from './core/security/auth-guard.service';
import { NavBarComponent } from './layout/nav-bar/nav-bar.component';
const routes: Routes = [{
        path: '',
        redirectTo: '/login',
        pathMatch: 'full'
    },
    {
        path: 'login',
        loadChildren: () =&gt;
            import('./auth/auth.module').then(m =&gt; m.AuthDataModule)
    },
    {
        path: 'home',
        component: NavBarComponent,
        canActivateChild: [
            AuthGuard
        ],
        children: [{
                path: 'initial',
                loadChildren: () =&gt;
                    import('./home/initial-page/initial-page.module').then(
                        m =&gt; m.InitialPageModule,
                    )
            },
            {
                path: 'employee',
                loadChildren: () =&gt;
                    import('./employee/employee.module').then(
                        m =&gt; m.EmployeeModule,
                    )
            }
        ]
    },
    {
       path: '**',
       redirectTo: '/login'
    },
];
@NgModule({
    imports: [
        RouterModule.forRoot(routes)
    ],
    exports: [
        RouterModule
    ]
})
export class AppRoutingModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that, if you want to make visible the Employee Grid in you <code>FE</code> application, you have to modify the <code>nav-bar.component.html</code>, to add the Employee grid in the section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="home-container-outer"&gt;
  &lt;div class="home-container-inner"&gt;
    &lt;mat-toolbar class="app-header-container" color="primary"&gt;
      &lt;app-header (toggle)="onToggle($event)" [sideNavOpened]="sideNavOpened"&gt;&lt;/app-header&gt;
    &lt;/mat-toolbar&gt;
    &lt;div class="sidenav-container-outer"&gt;
      &lt;div class="sidenav-container-inner"&gt;
        &lt;mat-sidenav-container&gt;
          &lt;mat-sidenav [disableClose]="false" [mode]="isMobile ? 'over' : 'side'" [opened]="!isMobile || sideNavOpened"
                       #sidenav&gt;
            &lt;mat-nav-list&gt;
              &lt;!-- Sidenav links --&gt;
              &lt;a id="home" mat-list-item [routerLink]="['./initial']" (click)="close()"&gt;
                &lt;mat-icon matListAvatar&gt;
                  home
                &lt;/mat-icon&gt;
                &lt;h3 matLine&gt;{{ 'home' | transloco }}&lt;/h3&gt;
                &lt;p matLine class="desc"&gt;{{ 'description' | transloco }}&lt;/p&gt;&lt;/a&gt;
              &lt;a id="employee" mat-list-item [routerLink]="['./employee']" (click)="close()"&gt;
                &lt;mat-icon matListAvatar&gt;
                  grid_on
                &lt;/mat-icon&gt;
                &lt;h3 matLine&gt; {{ 'employeemanagement.Employee.navData' | transloco }} &lt;/h3&gt;
                &lt;p matLine class="desc"&gt; {{ 'employeemanagement.Employee.navDataSub' | transloco }} &lt;/p&gt;&lt;/a&gt;
            &lt;/mat-nav-list&gt;
          &lt;/mat-sidenav&gt;
          &lt;mat-sidenav-content&gt;
            &lt;div class="content-container-outer"&gt;
              &lt;div class="content-container-inner"&gt;
                &lt;router-outlet&gt;&lt;/router-outlet&gt;
              &lt;/div&gt;
              &lt;mat-toolbar class="public-footer"&gt;
                &lt;span&gt;devonfw Application&lt;/span&gt;
                &lt;span&gt;devonfw&lt;/span&gt;
              &lt;/mat-toolbar&gt;
            &lt;/div&gt;
          &lt;/mat-sidenav-content&gt;
        &lt;/mat-sidenav-container&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open the command prompt and execute <em>devon npm install</em> from your application folder (<em>workspaces/main/devon4ng-application-template</em>), which would download all the required libraries.</p>
</div>
<div class="paragraph">
<p>Check the file <strong>environment.ts</strong> if the server path is correct. (for production you will have to change also the environment.prod.ts file)</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image42.png" alt="environment"></span></p>
</div>
<div class="paragraph">
<p>In order to do that, it’s important to look at the application.properties to see the values as <code>PATH</code>, TCP port etc…​</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image43.png" alt="configure"></span></p>
</div>
<div class="paragraph">
<p>For example in this case the URL should be since the context path is empty the server <code>URLS</code> should be like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">export const environment = {
    production: false,
    restPathRoot: 'http://localhost:8081/',
    restServiceRoot: 'http://localhost:8081/services/rest/',
    security: 'csrf'
};</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Warning</strong>: REMEMBER to set security filed to <strong>CSRF</strong> , if it is not configured already.</p>
</div>
<div class="paragraph">
<p>Now run the <strong>devon ng serve -o</strong> command to run the Angular Application, from your application folder (<em>workspaces/main/devon4ng-application-template</em>), as done before.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image75.png" alt="ng serve command"></span></p>
</div>
<div class="paragraph">
<p>If the command execution is <strong>successful</strong>, the below screen will <strong>appear</strong> and it would be automatically redirected to the url:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:4200/login</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image77.png" alt="angular web app"></span></p>
</div>
<div class="paragraph">
<p>You can login in the Web Application, with <strong><em>admin</em></strong> user and password.<br>
Obviously, the <code>BackEnd</code> part must be up &amp; running during this test!</p>
</div>
<div class="paragraph">
<p><strong><code>ANGULAR WebApp DONE</code></strong></p>
</div>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_ionic-mobile-app">Ionic Mobile App</h7>
<div class="paragraph">
<p>To generate Ionic structure, download or clone <em>*devon4ng-application-template*</em> from</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">https://github.com/devonfw/devon4ng-ionic-application-template</code></pre>
</div>
</div>
<div class="paragraph">
<p>IMPORTANT when you download the zip of the source code of your <code>FE</code> application, the name of the app MUST BE <strong>devon4ng-ionic-application-template</strong> and you can extract it in your DevonFW folder, under <em>workspaces/main</em></p>
</div>
<div class="paragraph">
<p>Once downloaded the <code>APP</code>, you can open the application with your favourite IDE (Intellij, Visual Studio Code, …​)<br>
Instead, if you want to open this project with Eclipse, you have to follow these steps:<br></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right click on the left part of Eclipse, anch click on "Import":
<span class="image"><img src="images/howtos/e2e_gen/image83.png" alt="import"></span></p>
</li>
<li>
<p>Click on "Projects from Folder or Archive"
<span class="image"><img src="images/howtos/e2e_gen/image82.png" alt="import"></span></p>
</li>
<li>
<p>Select your folder where you have saved the Angular <code>FE</code> Application, under <em>workspaces/main</em>. Wait that all the dependecies are charged and then click on "Finish"
<span class="image"><img src="images/howtos/e2e_gen/image84.png" alt="import"></span></p>
</li>
<li>
<p>At the end, you will have a structure like this:
<span class="image"><img src="images/howtos/e2e_gen/image86.png" alt="import"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once done, Right click on the <strong><code>EmployeeEto</code></strong> as you already did before in order to use CobiGen.
Click on the selected options as seen in the screenshot:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image46.png" alt="cobigen ionic"></span></p>
</div>
<div class="paragraph">
<p>Click on Finish<br>
The entire ionic structure will be auto generated.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image47.png" alt="image47"></span></p>
</div>
<div class="paragraph">
<p>Change (if necessary) the server url (with correct serve url) in <em>environment.ts</em>, <em>environment.prod.ts</em> and <em>environment.android.ts</em> files (i.e: itapoc\devon4ng-ionic-application-template\src\environments\).</p>
</div>
<div class="paragraph">
<p>The <em>angular.json</em> file inside the project has already a build configuration for android.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image48.png" alt="image48"></span></p>
</div>
<div class="paragraph">
<p>The only <strong>TWO</strong> thing that you have to modify, in this IONIC app is in <em>employee-list.page.html</em> and <em>business-operator.service.ts</em>.y<br></p>
</div>
<div class="paragraph">
<p><strong>1:</strong><br>
You have to change this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;layoutheader Title="Employee"&gt;&lt;/layoutheader&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>with this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;app-layout-header title="Employee"&gt;&lt;/app-layout-header&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2:</strong><br>
You have to change this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">return this.restPath + '/security/v1/csrftoken';</code></pre>
</div>
</div>
<div class="paragraph">
<p>with this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">return this.restPath + 'csrf/v1/token/';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once checked if all the files are correct, open a CMD devon CLI on the folder of the ionic template application (<em>workspaces/main/devon4ng-ionic-application-template</em>), under your <code>devonFW</code> workspace.<br>
In this folder:<br>
Run the command <em>*devon npm install*</em> in the root folder to download the dependecies.<br>
Once finished, run the command <em>*devon ionic serve*</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image49.png" alt="image49"></span></p>
</div>
<div class="paragraph">
<p>Once the execution is successful, you can make the LOGIN with <strong>admin/admin</strong> and…​</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image50.png" alt="image50"></span></p>
</div>
<div class="paragraph">
<p><strong>IONIC Mobile App DONE</strong></p>
</div>
<div class="paragraph">
<p>So: <strong>Well Done!!!</strong></p>
</div>
<div class="paragraph">
<p><code><strong>Starting from an Entity class you have successfully generated the Back-End layer (REST, SOAP, `DTO</strong></code><strong>, Spring services, <code>Hibernate DAO</code>), the Angular Web App and the Ionic mobile App!</strong>`</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image51.png" alt="image51"></span></p>
</div>
<div class="sect7">
<h8 id="devonfw-guide_cobigen.wiki_howto-devonfw-ide-cobigen-poc-e2e.asciidoc_build-apk">Build <code>APK</code></h8>
<div class="paragraph">
<p>Since We’re going to create apk remember the following preconditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://gradle.org/install/">Gradle</a></p>
</li>
<li>
<p><a href="https://developer.android.com/studio">Android Studio</a></p>
</li>
<li>
<p><a href="https://developer.android.com/studio/#command-tools">Android sdk</a></p>
</li>
<li>
<p><a href="https://capacitor.ionicframework.com/docs/getting-started/">Capacitor</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, open cmd and type the path where your <em>devon4ng-ionic-application-template</em> project is present.<br>
Run the following commands:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>npx cap init</p>
</li>
<li>
<p>ionic build --configuration=android</p>
</li>
<li>
<p>npx cap add android</p>
</li>
<li>
<p>npx cap copy</p>
</li>
<li>
<p>npx cap open android</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Build the <code>APK</code> using Android studio.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image52.png" alt="image52"></span>
<span class="image"><img src="images/howtos/e2e_gen/image53.png" alt="image53"></span>
<span class="image"><img src="images/howtos/e2e_gen/image54.png" alt="image54"></span>
<span class="image"><img src="images/howtos/e2e_gen/image55.png" alt="image55"></span></p>
</div>
<div class="paragraph">
<p>You can find your apk file in:
<em>/devon4ng-ionic-application-template/android/app/build/outputs/apk/debug</em></p>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto-devonfw-CobiGen-OpenAPI.asciidoc">End to End POC Code generation using OpenAPI</h4>
<div class="paragraph">
<p>This article helps to create a sample application using cobigen.</p>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_prerequisites">Prerequisites</h5>
<div class="paragraph">
<p>Download and install devonfw IDE <a href="https://devonfw.com/website/pages/docs/devonfw-ide-introduction.asciidoc.html#setup.asciidoc">here</a>,</p>
</div>
</div>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_steps-to-create-a-sample-project-using-cobigen">Steps to create a Sample Project using Cobigen</h5>
<div class="paragraph">
<p>The <code>HOW_TO</code> is divided in 2 parts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>BE</code>-Back End generator (<code>DB</code> + <code>DAO</code> + services) – CONTRACT FIRST APPROACH</p>
</li>
<li>
<p><code>FE</code>-Front End generator (Web App Angular + Ionic App) – CONTRACT FIRST APPROACH</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image9.png" alt="cobigen contract-first generation"></span></p>
</div>
<div class="paragraph">
<p>So, ready to go! We’re going to start from the <code>BE</code> part …</p>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_back-end">Back End</h6>
<div class="paragraph">
<p>Under your path installation of DevonFW, you can find the <em>eclipse-main.bat</em> script and you can run it:<br>
run <em>installation_path</em>\eclipse-main.bat</p>
</div>
<div class="paragraph">
<p>It will open eclipse</p>
</div>
<div class="paragraph">
<p>Create a project using a command from the command prompt.<br>
To made it, it’s necessary to open a CMD and open the folder where it’s installed DevonFW and launch this command under the path <em>workspaces/main</em>.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To facilitate this step, you can go from your "<em>File Explorer</em>" under <strong>workspaces/main</strong> folder and with the right button of the mouse, choose "<em>Open devonfw CMD shell here</em>"
<span class="image"><img src="images/howtos/e2e_gen/image85.png" alt="eclipse devon"></span>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then launch this command from CMD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">devon java create com.example.domain.myapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Import the project to eclipse as maven project
<span class="image"><img src="images/howtos/e2e_gen/image14.png" alt="eclipse devon"></span></p>
</div>
<div class="paragraph">
<p>Click <strong>FINISH</strong></p>
</div>
<div class="paragraph">
<p>Now We have the following 4 projects.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image15.png" alt="eclipse package explorer"></span></p>
</div>
<div class="paragraph">
<p><strong>BEFORE to start to create an Entity class, remember to create the tables, for this POC it’s used an H2 Database!</strong></p>
</div>
<div class="paragraph">
<p>Create a new <strong>SQL</strong> <strong>file</strong> (i.e: <code>V0002__CreateTables_myapp.sql</code>) inside <em>`myapp-core`</em> , under the folder path <em>`/myapp-core/src/main/resources/db/migration/1.0`</em> and insert the following script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE TABLE EMPLOYEE (
id BIGINT auto_increment, modificationCounter INTEGER NOT NULL,
employeeid BIGINT auto_increment,
name VARCHAR(255),
surname VARCHAR(255),
email VARCHAR(255),
PRIMARY KEY (employeeid)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>WARNING 1</em></strong>: please note that there in that folder is present only one file, 0001, and you have to add the other files in progressive number order (i.e. 0002)!<br>
<strong><em>WARNING 2</em></strong>: please note that there are 2 underscore in the name!</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image64.png" alt="sql file"></span></p>
</div>
<div class="paragraph">
<p>Now create another SQL file (<code>i.e: V0003__PopulateTables-myapp.sql</code>) and add following script about the INSERT in order to populate the table created before.
The script must be inserted at the same path used before: <em>`/myapp-core/src/main/resources/db/migration/1.0`</em></p>
</div>
<div class="paragraph">
<p><strong><em>WARNING 1</em></strong>: please note that there in that folder is present only one file, 0001, and you have to add the other files in progressive number order (i.e. 0003)!<br>
<strong><em>WARNING 2</em></strong>: please note that there are 2 underscore in the name!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">INSERT INTO EMPLOYEE (id, modificationCounter, employeeid, name, surname,email) VALUES (1, 1, 1, 'John','Doe','john.doe@example.com');
INSERT INTO EMPLOYEE (id, modificationCounter, employeeid, name, surname,email) VALUES (2, 2, 2, 'Tom','Smith', 'tom.smith@example.com');
INSERT INTO EMPLOYEE (id, modificationCounter, employeeid, name, surname,email) VALUES (3, 3, 3, 'Joe','Schmoe', 'joe.schmoe@example.com');</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image65.png" alt="sql insert"></span></p>
</div>
<div class="paragraph">
<p><strong>Let’s create the yml file for the code generation</strong></p>
</div>
<div class="paragraph">
<p>Now create a new file <em>devonfw.yml</em> in the root of your core folder. This will be our OpenAPI contract, like shown below. Then, copy the contents of <a href="https://github.com/devonfw/tools-cobigen/blob/master/documentation/files/devonfw_employee.yml">this file</a> into your OpenAPI. It defines some REST service endpoints and a <em>`EmployeeEntity`</em> with its properties defined.</p>
</div>
<div class="paragraph">
<p><strong>Important 1:</strong> Please pay attention to the content of the <em>devonfw.yml</em> file.<br>
The section <em>x-rootpackage</em> it must be filled with the same package used when you have created the java application.<br>
So i.e. if you have created the <code>BE</code> Java Application with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">devon java create com.example.domain.myapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have to populate the <em>devonfw.yml</em> in this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">x-rootpackage: com.example.domain.myapp</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image76.png" alt="package corresponding"></span></p>
</div>
<div class="paragraph">
<p><strong>Important 2:</strong> if you want to know how to write an OpenAPI contract compatible with CobiGen, please read <a href="https://github.com/devonfw/tools-cobigen/wiki/cobigen-openapiplugin#usage">this tutorial</a>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image18.png" alt="Swagger"></span></p>
</div>
<div class="paragraph">
<p>Use Cobigen to generate code. Right click <em>devonfw.yml</em>. CobiGen → Generate</p>
</div>
<div class="paragraph">
<p>If it will ask you to download the templates, click on <em>update</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image19.png" alt="cobigen generate"></span></p>
</div>
<div class="paragraph">
<p>It will automatically download the latest version of <em>CobiGen_Templates</em>.</p>
</div>
<div class="paragraph">
<p><strong>Attention:</strong> If you want to adapt the CobiGen_Templates, (normally this is not necessary), you will find at the end of this document (in a separate chapter) a tutorial on how to import them and adapt them!</p>
</div>
<div class="paragraph">
<p>Click on all the option selected as below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image20.png" alt="cobigen option selection"></span></p>
</div>
<div class="paragraph">
<p>Click on finish. Below Screen would be seen. Click on continue</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image21.png" alt="cobigen finish"></span></p>
</div>
<div class="paragraph">
<p><strong>The entire <span class="underline"><code>BE layer</code></span> structure having <code>CRUD</code> operation methods will be auto generated.</strong></p>
</div>
<div class="paragraph">
<p>Some classes will be generated on the api part (<em>`myapp-api`)</em>, normally it will be interfaces, as shown below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image22.png" alt="be layer"></span></p>
</div>
<div class="paragraph">
<p>Some other classes will be generated on the core part (<em>`myapp-core`)</em>, normally it will be implementations as shown below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image23.png" alt="core folder"></span></p>
</div>
<div class="paragraph">
<p>The last step is to add the Cross Domain process, because when you are developing Javascript client and server application separately, you have to deal with cross domain issues.</p>
</div>
<div class="paragraph">
<p>So, we need to prepare server side to accept request from other domains. We need to cover the following points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Accept request from other domains.</p>
</li>
<li>
<p>Accept devonfw used headers like <code>X-CSRF-TOKEN</code> or <code>correlationId</code>.</p>
</li>
<li>
<p>Be prepared to receive secured request (cookies).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To do this it’s necessary to add two kind of dependecies in the pom.xml of the <em>`myapp-core`</em> folder, at the end of the list of dependecies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;dependency&gt;
      &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
      &lt;artifactId&gt;devon4j-starter-security-cors&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.devonfw.java.starters&lt;/groupId&gt;
      &lt;artifactId&gt;devon4j-starter-security-csrf&lt;/artifactId&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image70.png" alt="pom xml"></span></p>
</div>
<div class="paragraph">
<p>Next step is to add some properties under your <em>application.properties</em> file, in the <code>myapp-core</code> folder in the <em>resources/config</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">security.cors.spring.allowCredentials=true
security.cors.spring.allowedOriginPatterns=*
security.cors.spring.allowedHeaders=*
security.cors.spring.allowedMethods=OPTIONS,HEAD,GET,PUT,POST,DELETE,PATCH
security.cors.pathPattern=/**</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image71.png" alt="application properties"></span></p>
</div>
<div class="paragraph">
<p><strong>BEFORE to generate the <code>FE</code></strong>, please start the Tomcat server to check that <code>BE</code> Layer has been generated properly.</p>
</div>
<div class="paragraph">
<p>To start a server you just have to right click on <em>`SpringBootApp.java`</em> → <em>run as → Java Application</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image24.png" alt="Eclipse run as"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image69.png" alt="Spring boot run"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image26.png" alt="Spring boot run"></span></p>
</div>
<div class="paragraph">
<p><strong><code>BE</code> DONE</strong></p>
</div>
<div class="paragraph">
<p>Last but not least: We make a quick REST services test !</p>
</div>
<div class="paragraph">
<p>See in the <em>application.properties</em> the TCP Port and the PATH</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image27.png" alt="application properties"></span></p>
</div>
<div class="paragraph">
<p>Now compose the Rest service URL:</p>
</div>
<div class="paragraph">
<p><strong>service class &lt;path&gt;/&lt;service method path&gt;</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;server&gt; refers to server with port no. (ie: localhost:8081)</p>
</li>
<li>
<p>&lt;app&gt; is in the <em>application.properties</em> (empty in our case, see above)</p>
</li>
<li>
<p>&lt;rest service class path&gt; refers to <code>EmployeemanagementRestService</code>: (i.e: /employeemanagement/v1)</p>
</li>
<li>
<p>&lt;service method path&gt;/employee/{id}  (i.e: for  <code>getEmployee</code> method)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image28.png" alt="url mapping"></span></p>
</div>
<div class="paragraph">
<p>URL of <code>getEmployee</code> for this example is:</p>
</div>
<div class="paragraph">
<p>For all employees (<code>POST</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:8081/services/rest/employeemanagement/v1/employee/search</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the specific employee (<code>GET</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:8081/services/rest/employeemanagement/v1/employee/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now download <a href="https://www.getpostman.com/apps">Postman</a> to test the rest services.</p>
</div>
<div class="paragraph">
<p>Once done, you have to create a <code>POST</code> Request for the LOGIN and insert in the body the JSON containing the username and password <em>admin</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image72.png" alt="postman"></span></p>
</div>
<div class="paragraph">
<p><strong><em>WARNING</em></strong>: please note that the body of the request must be JSON type!</p>
</div>
<div class="paragraph">
<p>Once done with success (<strong>Status: 200 OK</strong>) - <em>you can see the status of the response in the top right corner of Postman</em> - we can create a NEW GET Request in order to get one employee.</p>
</div>
<div class="paragraph">
<p>To do this you have to create a new request in Postman, <code>GET</code> type, and insert the URL specified before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:8081/services/rest/employeemanagement/v1/employee/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thenk click on <strong>"SEND"</strong> button…​</p>
</div>
<div class="paragraph">
<p>Now you have to check that response has got <strong>Status: 200 OK</strong> and to see the below Employee</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image73.png" alt="postman"></span></p>
</div>
<div class="paragraph">
<p>Now that We have successfully tested the <code>BE</code> is time to go to create the <code>FE</code> !</p>
</div>
</div>
<div class="sect5">
<h6 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_front-end">Front End</h6>
<div class="paragraph">
<p>Let’s start now with angular Web and then Ionic app.</p>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_angular-web-app">Angular Web App</h7>
<div class="paragraph">
<p>To generate angular structure, download or clone <strong>devon4ng-application-template</strong> from</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">https://github.com/devonfw/devon4ng-application-template</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image74.png" alt="devon dist folder"></span></p>
</div>
<div class="paragraph">
<p>IMPORTANT when you download the zip of the source code of your <code>FE</code> application, the name of the app MUST BE <strong>devon4ng-application-template</strong> and you can extract it in your DevonFW folder, under <em>workspaces/main</em></p>
</div>
<div class="paragraph">
<p>Once downloaded the <code>APP</code>, you can open the application with your favourite IDE (Intellij, Visual Studio Code, …​)<br>
Instead, if you want to open this project with Eclipse, you have to follow these steps:<br></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right click on the left part of Eclipse, anch click on "Import":
<span class="image"><img src="images/howtos/e2e_gen/image83.png" alt="import"></span></p>
</li>
<li>
<p>Click on "Projects from Folder or Archive"
<span class="image"><img src="images/howtos/e2e_gen/image82.png" alt="import"></span></p>
</li>
<li>
<p>Select your folder where you have saved the Angular <code>FE</code> Application, under <em>workspaces/main</em>. Wait that all the dependecies are charged and then click on "Finish"
<span class="image"><img src="images/howtos/e2e_gen/image84.png" alt="import"></span></p>
</li>
<li>
<p>At the end, you will have a structure like this:
<span class="image"><img src="images/howtos/e2e_gen/image86.png" alt="import"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once done, right click on the <strong><em>devonfw.yml</em></strong> (present in the <em>`myapp-core`</em> module) in order to use CobiGen.
Click on the selected options as seen in the screenshot:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image37.png" alt="eclipse generate"></span></p>
</div>
<div class="paragraph">
<p>Click on Finish</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image38.png" alt="eclipse"></span></p>
</div>
<div class="paragraph">
<p>The entire <code>ANGULAR</code> structure has been auto generated. The generated code will be merged to the existing.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image39.png" alt="angular End to End layer"></span></p>
</div>
<div class="paragraph">
<p>IMPORTANT now you have to check in the <strong><em>app-routing.module.ts</em></strong> file, if the content corresponding to the code below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';
import { AuthGuard } from './core/security/auth-guard.service';
import { NavBarComponent } from './layout/nav-bar/nav-bar.component';
const routes: Routes = [{
        path: '',
        redirectTo: '/login',
        pathMatch: 'full'
    },
    {
        path: 'login',
        loadChildren: () =&gt;
            import('./auth/auth.module').then(m =&gt; m.AuthDataModule)
    },
    {
        path: 'home',
        component: NavBarComponent,
        canActivateChild: [
            AuthGuard
        ],
        children: [{
                path: 'initial',
                loadChildren: () =&gt;
                    import('./home/initial-page/initial-page.module').then(
                        m =&gt; m.InitialPageModule,
                    )
            },
            {
                path: 'employee',
                loadChildren: () =&gt;
                    import('./employee/employee.module').then(
                        m =&gt; m.EmployeeModule,
                    )
            }
        ]
    },
    {
       path: '**',
       redirectTo: '/login'
    },
];
@NgModule({
    imports: [
        RouterModule.forRoot(routes)
    ],
    exports: [
        RouterModule
    ]
})
export class AppRoutingModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that, if you want to make visible the Employee Grid in you <code>FE</code> application, you have to modify the <code>nav-bar.component.html</code>, to add the Employee grid in the section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="home-container-outer"&gt;
  &lt;div class="home-container-inner"&gt;
    &lt;mat-toolbar class="app-header-container" color="primary"&gt;
      &lt;app-header (toggle)="onToggle($event)" [sideNavOpened]="sideNavOpened"&gt;&lt;/app-header&gt;
    &lt;/mat-toolbar&gt;
    &lt;div class="sidenav-container-outer"&gt;
      &lt;div class="sidenav-container-inner"&gt;
        &lt;mat-sidenav-container&gt;
          &lt;mat-sidenav [disableClose]="false" [mode]="isMobile ? 'over' : 'side'" [opened]="!isMobile || sideNavOpened"
                       #sidenav&gt;
            &lt;mat-nav-list&gt;
              &lt;!-- Sidenav links --&gt;
              &lt;a id="home" mat-list-item [routerLink]="['./initial']" (click)="close()"&gt;
                &lt;mat-icon matListAvatar&gt;
                  home
                &lt;/mat-icon&gt;
                &lt;h3 matLine&gt;{{ 'home' | transloco }}&lt;/h3&gt;
                &lt;p matLine class="desc"&gt;{{ 'description' | transloco }}&lt;/p&gt;&lt;/a&gt;
              &lt;a id="employee" mat-list-item [routerLink]="['./employee']" (click)="close()"&gt;
                &lt;mat-icon matListAvatar&gt;
                  grid_on
                &lt;/mat-icon&gt;
                &lt;h3 matLine&gt; {{ 'employeemanagement.Employee.navData' | transloco }} &lt;/h3&gt;
                &lt;p matLine class="desc"&gt; {{ 'employeemanagement.Employee.navDataSub' | transloco }} &lt;/p&gt;&lt;/a&gt;
            &lt;/mat-nav-list&gt;
          &lt;/mat-sidenav&gt;
          &lt;mat-sidenav-content&gt;
            &lt;div class="content-container-outer"&gt;
              &lt;div class="content-container-inner"&gt;
                &lt;router-outlet&gt;&lt;/router-outlet&gt;
              &lt;/div&gt;
              &lt;mat-toolbar class="public-footer"&gt;
                &lt;span&gt;devonfw Application&lt;/span&gt;
                &lt;span&gt;devonfw&lt;/span&gt;
              &lt;/mat-toolbar&gt;
            &lt;/div&gt;
          &lt;/mat-sidenav-content&gt;
        &lt;/mat-sidenav-container&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open the command prompt and execute <em>devon npm install</em> from your application folder (<em>workspaces/main/devon4ng-application-template</em>), which would download all the required libraries.</p>
</div>
<div class="paragraph">
<p>Check the file <strong>environment.ts</strong> if the server path is correct. (for production you will have to change also the environment.prod.ts file)</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image42.png" alt="environment"></span></p>
</div>
<div class="paragraph">
<p>In order to do that, it’s important to look at the application.properties to see the values as PATH, TCP port etc…​</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image43.png" alt="configure"></span></p>
</div>
<div class="paragraph">
<p>For example in this case the URL should be since the context path is empty the server <code>URLS</code> should be like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">export const environment = {
    production: false,
    restPathRoot: 'http://localhost:8081/',
    restServiceRoot: 'http://localhost:8081/services/rest/',
    security: 'csrf'
};</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Warning</strong>: REMEMBER to set security filed to <strong>CSRF</strong> , if it is not configured already.</p>
</div>
<div class="paragraph">
<p>Now run the <strong>devon ng serve -o</strong> command to run the Angular Application, from your application folder (<em>workspaces/main/devon4ng-application-template</em>), as done before.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image75.png" alt="ng serve command"></span></p>
</div>
<div class="paragraph">
<p>If the command execution is <strong>successful</strong>, the below screen will <strong>appear</strong> and it would be automatically redirected to the url:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">http://localhost:4200/login</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image77.png" alt="angular web app"></span></p>
</div>
<div class="paragraph">
<p>You can login in the Web Application, with <strong><em>admin</em></strong> user and password.<br>
Obviously, the <code>BackEnd</code> part must be up &amp; running during this test!</p>
</div>
<div class="paragraph">
<p><strong><code>ANGULAR WebApp DONE</code></strong></p>
</div>
</div>
<div class="sect6">
<h7 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_ionic-mobile-app">Ionic Mobile App</h7>
<div class="paragraph">
<p>To generate Ionic structure, download or clone <em>*devon4ng-application-template*</em> from</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">https://github.com/devonfw/devon4ng-ionic-application-template</code></pre>
</div>
</div>
<div class="paragraph">
<p>IMPORTANT when you download the zip of the source code of your <code>FE</code> application, the name of the app MUST BE <strong>devon4ng-ionic-application-template</strong> and you can extract it in your DevonFW folder, under <em>workspaces/main</em></p>
</div>
<div class="paragraph">
<p>Once downloaded the <code>APP</code>, you can open the application with your favourite IDE (Intellij, Visual Studio Code, …​)<br>
Instead, if you want to open this project with Eclipse, you have to follow these steps:<br></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right click on the left part of Eclipse, anch click on "Import":
<span class="image"><img src="images/howtos/e2e_gen/image83.png" alt="import"></span></p>
</li>
<li>
<p>Click on "Projects from Folder or Archive"
<span class="image"><img src="images/howtos/e2e_gen/image82.png" alt="import"></span></p>
</li>
<li>
<p>Select your folder where you have saved the Angular <code>FE</code> Application, under <em>workspaces/main</em>. Wait that all the dependecies are charged and then click on "Finish"
<span class="image"><img src="images/howtos/e2e_gen/image84.png" alt="import"></span></p>
</li>
<li>
<p>At the end, you will have a structure like this:
<span class="image"><img src="images/howtos/e2e_gen/image86.png" alt="import"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once done, Right click on the <strong><em>devonfw.yml</em></strong> as you already did before in order to use CobiGen.
Click on the selected options as seen in the screenshot:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image46.png" alt="cobigen ionic"></span></p>
</div>
<div class="paragraph">
<p>Click on Finish<br>
The entire ionic structure will be auto generated.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image47.png" alt="image47"></span></p>
</div>
<div class="paragraph">
<p>Change (if necessary) the server url (with correct serve url) in <em>environment.ts</em>, <em>environment.prod.ts</em> and <em>environment.android.ts</em> files (i.e: itapoc\devon4ng-ionic-application-template\src\environments\).</p>
</div>
<div class="paragraph">
<p>The <em>angular.json</em> file inside the project has already a build configuration for android.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image48.png" alt="image48"></span></p>
</div>
<div class="paragraph">
<p>The only <strong>TWO</strong> thing that you have to modify, in this IONIC app is in <em>employee-list.page.html</em> and <em>business-operator.service.ts</em>.y<br></p>
</div>
<div class="paragraph">
<p><strong>1:</strong><br>
You have to change this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;layoutheader Title="Employee"&gt;&lt;/layoutheader&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>with this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;app-layout-header title="Employee"&gt;&lt;/app-layout-header&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2:</strong><br>
You have to change this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">return this.restPath + '/security/v1/csrftoken';</code></pre>
</div>
</div>
<div class="paragraph">
<p>with this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ts" data-lang="ts">return this.restPath + 'csrf/v1/token/';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once checked if all the files are correct, open a CMD devon CLI on the folder of the ionic template application (<em>workspaces/main/devon4ng-ionic-application-template</em>), under your <code>devonFW</code> workspace.<br>
In this folder:<br>
Run the command <em>*devon npm install*</em> in the root folder to download the dependecies.<br>
Once finished, run the command <em>*devon ionic serve*</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image49.png" alt="image49"></span></p>
</div>
<div class="paragraph">
<p>Once the execution is successful, you can make the LOGIN with <strong>admin/admin</strong> and…​</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image50.png" alt="image50"></span></p>
</div>
<div class="paragraph">
<p><strong>IONIC Mobile App DONE</strong></p>
</div>
<div class="paragraph">
<p>So: <strong>Well Done!!!</strong></p>
</div>
<div class="paragraph">
<p><code><strong>Starting from an Entity class you’ve successfully generated the Back-End layer (REST, SOAP, `DTO</strong></code><strong>, Spring services, <code>Hibernate DAO</code>), the Angular Web App and the Ionic mobile App!</strong>`</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image51.png" alt="image51"></span></p>
</div>
<div class="sect7">
<h8 id="devonfw-guide_cobigen.wiki_howto-devonfw-cobigen-openapi.asciidoc_build-apk">Build <code>APK</code></h8>
<div class="paragraph">
<p>Since We are going to create <code>apk</code> remember the following preconditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://gradle.org/install/">Gradle</a></p>
</li>
<li>
<p><a href="https://developer.android.com/studio">Android Studio</a></p>
</li>
<li>
<p><a href="https://developer.android.com/studio/#command-tools">Android sdk</a></p>
</li>
<li>
<p><a href="https://capacitor.ionicframework.com/docs/getting-started/">Capacitor</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, open cmd and type the path where your <em>devon4ng-ionic-application-template</em> project is present.<br>
Run the following commands:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>npx cap init</p>
</li>
<li>
<p>ionic build --configuration=android</p>
</li>
<li>
<p>npx cap add android</p>
</li>
<li>
<p>npx cap copy</p>
</li>
<li>
<p>npx cap open android</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Build the <code>APK</code> using Android studio.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image52.png" alt="image52"></span>
<span class="image"><img src="images/howtos/e2e_gen/image53.png" alt="image53"></span>
<span class="image"><img src="images/howtos/e2e_gen/image54.png" alt="image54"></span>
<span class="image"><img src="images/howtos/e2e_gen/image55.png" alt="image55"></span></p>
</div>
<div class="paragraph">
<p>You can find your apk file in:
<em>/devon4ng-ionic-application-template/android/app/build/outputs/apk/debug</em></p>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto-devonfw-adapt_template.asciidoc">Adapt Templates from Cobigen</h4>
<div class="sect4">
<h5 id="devonfw-guide_cobigen.wiki_howto-devonfw-adapt_template.asciidoc_adapt-cobigen_templates">Adapt CobiGen_Templates</h5>
<div class="paragraph">
<p>After following this tutorial, you will have the CobiGen_Templates downloaded on your local machine. To import these templates you need to do the following:</p>
</div>
<div class="paragraph">
<p>Right click in any part of the package explorer, then click on CobiGen → Adapt templates</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image56.png" alt="image56"></span></p>
</div>
<div class="paragraph">
<p>Click <em>Ok</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image57.png" alt="image57"></span></p>
</div>
<div class="paragraph">
<p>Now the CobiGen_Templates project will be automatically imported into your workspace, as shown on the image below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image58.png" alt="image58"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image59.png" alt="image59"></span></p>
</div>
<div class="paragraph">
<p>Now you just need to change the Java version of the project to JRE 1.8. Right click on the JRE system library, and then on <em>Properties:</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image60.png" alt="image60"></span></p>
</div>
<div class="paragraph">
<p>Now change the version to Java 1.8
<span class="image"><img src="images/howtos/e2e_gen/image61.png" alt="image61"></span></p>
</div>
<div class="paragraph">
<p>Now you have successfully imported the CobiGen templates. If you want to edit them, you will find them in the folder <em>src/main/templates.</em> For instance, the Java templates are located here:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/howtos/e2e_gen/image62.png" alt="image62"></span></p>
</div>
<div class="paragraph">
<p>Now you can adapt the templates as much as you want. Documentation about this can be found on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-URL" data-lang="URL">https://github.com/devonfw/tools-cobigen/wiki/Guide-to-the-Reader</code></pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cobigen.wiki_howto_enable_composite_primary_keys_in_entity.asciidoc">Enable Composite Primary Keys in Entity</h4>
<div class="paragraph">
<p>In order to enable Composite Primary Keys in entity in CobiGen, the below approach is suggested</p>
</div>
<div class="paragraph">
<p>The templates in cobigen have been enhanced to support Composite primary keys while still supporting the default devonfw/Cobigen values with Long id.</p>
</div>
<div class="paragraph">
<p>Also, the current generation from Entity still holds good - right click from an Entity object, CobiGen → Generate will show the CobiGen wizard relative to the entity generation.</p>
</div>
<div class="paragraph">
<p>After generating, below example shows how composite primary keys can be enabled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Entity
@Table(name = "employee")
public class EmployeeEntity {
	private CompositeEmployeeKey id;
	private String name;
	private String lastName;
	@Override
	@EmbeddedId
	public CompositeEmployeeKey getId() {
		return id;
	}
	@Override
	public void setId(CompositeEmployeeKey id) {
		this.id = id;
	}
	.
	.
	.</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class CompositeEmployeeKey implements Serializable {
  private String companyId;
  private String employeeId;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the generation is complete, implement <code>PersistenceEntity&lt;ID&gt;</code>.java in the <code>EmployeeEntity</code> and pass the composite primary key object which is <code>CompositeEmployeeKey</code> in this case as the parameter <code>ID</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import com.devonfw.module.basic.common.api.entity.PersistenceEntity;
@Entity
@Table(name = "employee")
public class EmployeeEntity implements PersistenceEntity&lt;CompositeEmployeeKey&gt; {
	private CompositeEmployeeKey id;
	private String name;
	private String lastName;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, the <code>modificationCounter</code> methods needs to be implemented from the interface <code>PersistenceEntity&lt;ID&gt;</code>. The sample implementation of the modification counter can be referred below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
  public int getModificationCounter() {
    if (this.persistentEntity != null) {
      // JPA implementations will update modification counter only after the transaction has been committed.
      // Conversion will typically happen before and would result in the wrong (old) modification counter.
      // Therefore we update the modification counter here (that has to be called before serialization takes
      // place).
      this.modificationCounter = this.persistentEntity.getModificationCounter();
    }
    return this.modificationCounter;
  }
  @Override
  public void setModificationCounter(int version) {
    this.modificationCounter = version;
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>←&nbsp;Previous:&nbsp;<a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_eclipse-integration.html">Eclipse Integration</a>&nbsp;| ↑&nbsp;Up:&nbsp;<a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc.html">CobiGen — Code-based incremental Generator</a>&nbsp;| ⌂&nbsp;Home:&nbsp;<a href="master.html">devonfw guide</a>&nbsp;| Next:&nbsp;<a href="devonfw-guide_cobigen.wiki_master-cobigen.asciidoc_template-development.html">Template Development</a>&nbsp;→</p>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html#introduction-why-should-i-use-devonfw.asciidoc">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_further-information.html">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
<li>
<p><a href="/website/pages/resources/resources.html">Resources</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-ide-support.asciidoc.html#LICENSE.asciidoc">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-02-18 18:42:23 UTC
</sub></div>


<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;

      if (document.cookie.indexOf(cookieName) < 0) {
        $("body").append(cookieConsentHtml);
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        $("#cookie-consent").hide();
      });
</script>

</body></html>