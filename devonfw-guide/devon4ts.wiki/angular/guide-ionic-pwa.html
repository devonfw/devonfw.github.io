<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Ionic Progressive Web App</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Ubuntu Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400&display=swap" rel="stylesheet">
<!-- Lunr -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js" integrity="sha256-M/Awbb/BYh+Rh0aGjpQid26p1b2OBsrk2k9yAvQxPV0=" crossorigin="anonymous"></script>
<!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/styles/googlecode.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/lang/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>

<!-- ******************************************** -->


<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://www.katacoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc">Ionic Progressive Web App</a>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_assumptions">Assumptions</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_sample-application">Sample Application</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-1-create-a-new-project">Step 1: Create a new project</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-2-structures-and-styles">Step 2: Structures and styles</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-3-add-functionality">Step 3: Add functionality</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-4-pwa-elements">Step 4: PWA Elements</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-5-make-it-progressive.">Step 5: Make it Progressive.</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-6-configure-the-app">Step 6: Configure the app</a></li>
<li><a href="#devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-7-check-that-your-app-is-a-pwa">Step 7: Check that your app is a PWA</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc" class="sect0">Ionic Progressive Web App</h1>
<div class="paragraph">
<p>This guide is a continuation of the guide <a href="#guide-angular-pwa.asciidoc">Angular PWAs</a>, therefore, valid concepts explained there are still valid in this page but focused on Ionic.</p>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_assumptions">Assumptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide assumes that you already have installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>NodeJS</p>
</li>
<li>
<p>npm package manager</p>
</li>
<li>
<p>Angular CLI / Nx CLI</p>
</li>
<li>
<p>Ionic 5 CLI</p>
</li>
<li>
<p>Capacitor</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also, it is a good idea to read the document about PWA using Angular.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_sample-application">Sample Application</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/ionic/ionic-pwa/base.png" alt="Ionic 5 PWA Base" width="250 link="images/ionic/ionic-pwa/base.png"">
</div>
<div class="title">Figure 1. Basic ionic PWA.</div>
</div>
<div class="paragraph">
<p>To explain how to build progressive web apps (PWA) using Ionic, a basic application is going to be built. This app will be able to take photos even without network using PWA elements.</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-1-create-a-new-project">Step 1: Create a new project</h3>
<div class="paragraph">
<p>This step can be completed with one simple command: <code>ionic start &lt;name&gt; &lt;template&gt;</code>, where <code>&lt;name&gt;</code> is the name and <code>&lt;template&gt;</code> a model for the app. In this case, the app is going to be named <code><strong>basic-ion-pwa</strong></code>.</p>
</div>
<div class="paragraph">
<p>If you are using Nx, there is a pre-requisite to this step. And that is, you have to add the <code>@nxtend/ionic-angular</code> plugin to your Nx workspace. The command for that is <code>npm install --save-dev @nxtend/ionic-angular</code>. Once you have the plugin installed, you can generate an ionic app in your Nx workspace with the command <code>nx generate @nxtend/ionic-angular:app basic-ion-pwa</code>. (You can refer <a href="https://github.com/devonfw/devon4ng/wiki/guide-creating-angular-app-with-nx-cli">this guide</a> if you want to get started with Nx).</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-2-structures-and-styles">Step 2: Structures and styles</h3>
<div class="paragraph">
<p>The styles (scss) and structures (html) do not have anything specially relevant, just colors and ionic web components. The code can be found in <a href="https://github.com/devonfw-sample/devon4ts-samples/tree/master/apps/ionic-basic-pwa">devon4ts-samples</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-3-add-functionality">Step 3: Add functionality</h3>
<div class="paragraph">
<p>After this step, the app will allow users to take photos and display them in the main screen.
First we have to import three important elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DomSanitizer</code>: Sanitizes values to be safe to use.</p>
</li>
<li>
<p><code>SafeResourceUrl</code>: Interface for values that are safe to use as URL.</p>
</li>
<li>
<p>Plugins: Capacitor constant value used to access to the device&#8217;s camera and toast dialogs.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>  import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';
  import { Plugins, CameraResultType } from '@capacitor/core';</code></pre>
</div>
</div>
<div class="paragraph">
<p>The process of taking a picture is enclosed in a <code>takePicture()</code> method. <code>takePicture()</code> calls the Camera&#8217;s <code>getPhoto()</code> function which returns an URL or an exception. If a photo is taken then the image displayed in the main page will be changed for the new picture, else, if the app is closed without changing it, a toast message will be displayed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>  export class HomePage {
    image: SafeResourceUrl;
    ...

    async takePicture() {
      try {
        const image = await Plugins.Camera.getPhoto({
          quality: 90,
          allowEditing: true,
          resultType: CameraResultType.Uri,
        });

        // Change last picture shown
        this.image = this.sanitizer.bypassSecurityTrustResourceUrl(image.webPath);
      } catch (e) {
        this.show('Closing camera');
      }
    }

    async show(message: string) {
      await Plugins.Toast.show({
        text: message,
      });
    }
  }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-4-pwa-elements">Step 4: PWA Elements</h3>
<div class="paragraph">
<p>When Ionic apps are not running natively, some resources like Camera do not work by default but can be enabled using PWA Elements. To use Capacitor&#8217;s PWA elements run <code>npm install @ionic/pwa-elements</code> and modify src/main.ts as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>...

// Import for PWA elements
import { defineCustomElements } from '@ionic/pwa-elements/loader';

if (environment.production) {
  enableProdMode();
}

platformBrowserDynamic().bootstrapModule(AppModule)
  .catch(err =&gt; console.log(err));

// Call the element loader after the platform has been bootstrapped
defineCustomElements(window);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-5-make-it-progressive.">Step 5: Make it Progressive.</h3>
<div class="paragraph">
<p>Turning an Ionic 5 app into a PWA is pretty easy. The same module used to turn Angular apps into PWAs has to be added. To do so, run: <code>ng add @angular/pwa</code>. This command also creates an <strong>icons</strong> folder inside <strong>src/assets</strong> and contains angular icons for multiple resolutions. (Note: In an Nx workspace, you have to add it like a normal package using <code>npm install @angular/pwa</code>, and you have to manually add the icons). If you want to use other images, be sure that they have the same resolution, the names can be different but the file <strong>manifest.json</strong> has to be changed accordingly.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-6-configure-the-app">Step 6: Configure the app</h3>
<div class="paragraph">
<p><strong>manifest.json</strong></p>
</div>
<div class="paragraph">
<p>Default configuration.</p>
</div>
<div class="paragraph">
<p><strong>ngsw-config.json</strong></p>
</div>
<div class="paragraph">
<p>At <code>assetGroups</code> &#8594; <code>resources</code> add a URLs field and a pattern to match PWA Elements scripts and other resources (images, styles, &#8230;&#8203;):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>  "urls": ["https://unpkg.com/@ionic/pwa-elements@1.0.2/dist/**"]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4ts.wiki_angular_guide-ionic-pwa.asciidoc_step-7-check-that-your-app-is-a-pwa">Step 7: Check that your app is a PWA</h3>
<div class="paragraph">
<p>To check if an app is a PWA lets compare its normal behavior against itself but built for production. Run in the project&#8217;s root folder the commands below:</p>
</div>
<div class="paragraph">
<p><code>ionic build --configuration production</code> to build the app using production settings. (<code>nx build basic-ion-pwa --configuration production</code> in your Nx workspace root).</p>
</div>
<div class="paragraph">
<p><code>npm install http-server</code> to install an npm module that can serve your built application. Documentation <a href="https://www.npmjs.com/package/http-server">here</a>. A good alternative is also <code>npm install serve</code>. It can be checked <a href="https://github.com/zeit/serve">here</a>.</p>
</div>
<div class="paragraph">
<p>Go to the <code><strong>www</strong></code> folder running <code>cd www</code>.</p>
</div>
<div class="paragraph">
<p><code>http-server -o</code> or <code>serve</code> to serve your built app.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
In order not to install anything not necessary <code>npx</code> can be used directly to serve the app. i.e run <code>npx serve [folder]</code> will automatically download and run this HTTP server without installing it in the project dependencies.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/ionic/ionic-pwa/http-server.png" alt="Http server running" width="600 link="images/ionic/ionic-pwa/http-server.png"">
</div>
<div class="title">Figure 2. Http server running on localhost:8081.</div>
</div>
<div class="paragraph">
<p>&#160;<br>
In another console instance run <code>ionic serve</code> (<code>nx serve basic-ion-pwa</code> if using Nx CLI) to open the common app (not built).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/ionic/ionic-pwa/ionic-serve.png" alt="Ionic serve on Visual Studio Code console" width="600 link="images/ionic/ionic-pwa/ionic-serve.png"">
</div>
<div class="title">Figure 3. Ionic server running on localhost:8100.</div>
</div>
<div class="paragraph">
<p>&#160;<br>
The first difference can be found on <em>Developer tools &#8594; application</em>, here it is seen that the PWA application (left) has a service worker and the common one does not.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/ionic/ionic-pwa/pwa-nopwa-app.png" alt="Application comparison" width="800 link="images/ionic/ionic-pwa/pwa-nopwa-app.png"">
</div>
<div class="title">Figure 4. Application service worker comparison.</div>
</div>
<div class="paragraph">
<p>&#160;<br>
If the "offline" box is checked, it will force a disconnection from network. In situations where users do not have connectivity or have a slow, one the PWA can still be accessed and used.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/ionic/ionic-pwa/online-offline.png" alt="Online offline apps" width="800 link="images/ionic/ionic-pwa/online-offline.png"">
</div>
<div class="title">Figure 5. Offline application.</div>
</div>
<div class="paragraph">
<p>&#160;<br>
Finally, plugins like <a href="https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk">Lighthouse</a> can be used to test whether an application is progressive or not.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/ionic/ionic-pwa/lighthouse.png" alt="Lighthouse report" width="800 link="images/ionic/ionic-pwa/lighthouse.png"">
</div>
<div class="title">Figure 6. Lighthouse report.</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html#introduction-why-should-i-use-devonfw.asciidoc">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_further-information.html">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
<li>
<p><a href="/website/pages/resources/resources.html">Resources</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-ide-support.asciidoc.html#LICENSE.asciidoc">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
<div class="footnote"><sub>

Last updated 2022-02-15 08:07:44 UTC
</sub></div>
</div>
</div>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
</body>
</html>