{"type":"doc","filename":"deployment.asciidoc.html","anchor":"deployment-pipelines.asciidoc","title":"Deployment Pipelines","breadcrumbs":["MyThaiStar","CI/CD","Deployment"],"text":"Deployment Pipelines\n\nAs PL does not support deployments, we have created separate pipelines for this purpose. Those pipelines are: MyThaiStar_REVERSE-PROXY_DEPLOY, MyThaiStar_FRONT-END_DEPLOY and MyThaiStar_SERVER_DEPLOY.\n\n\nThe application will be deployed using docker on a remote machine. The architecture is as follows:\n\n\n\n\n\n\n\nThe parts to be deployed are: an NGINX reverse proxy, the java application and the angular application.\n\n\nMyThaiStar_SERVER_DEPLOY Pipeline\n\nDeploys on the server the Java part of My Thai Star.\n\n\nParameters\n\n\n\nregistryUrl: The URL to the docker registry where the image is stored.\n\n\nregistryCredentialsId: Credentials to publish/download images from registry.\n\n\ndockerNetwork: Network of your My Thai Star application. You can deploy several versions of MTS in the same server by changing the dockerNetwork.\n\n\nVERSION: The version that you can to deploy.\n\n\n\n\n\nPipeline steps\n\n\n\nCreate docker network: Create the docker network with the name provided as parameter.\n\n\nDeploy new image: Deploy a new java container. If it already exists, first it delete the previous one.\n\n\n\n\n\n\nMyThaiStar_FRONT-END_DEPLOY\n\nDeploys on the server the Angular part of My Thai Star\n\n\nParameters\n\n\n\nregistryUrl: The URL to the docker registry where the image is stored.\n\n\nregistryCredentialsId: Credentials to publish/download images from registry.\n\n\ndockerNetwork: Network of your My Thai Star application. You can deploy several versions of MTS in the same server by changing the dockerNetwork.\n\n\nVERSION: The version that you can to deploy.\n\n\n\n\n\nPipeline steps\n\n\n\nCreate docker network: Create the docker network with the name provided as parameter.\n\n\nDeploy new image: Deploy a new angular container. If it already exists, first it delete the previous one.\n\n\n\n\n\n\nMyThaiStar_REVERSE-PROXY_DEPLOY Pipeline\n\n\n\n\n\n\n\nAs reverse proxy connects to the Java and Angular application, both must be deployed before you execute this pipeline.\n\n\n\n\n\nThe MyThaiStar_REVERSE-PROXY_DEPLOY pipeline will deploy the My Thai Star reverse proxy into a remote machine using docker.\n\n\nParameters\n\n\n\nregistryUrl: The URL to the docker registry where the image is stored.\n\n\nregistryCredentialsId: Credentials to publish/download images from registry.\n\n\nbuildReverseProxy: If yes, it will build and publish a new version of reverse-proxy.\n\n\nport: Port of the MTS application. You must ensure that those port is available in the deployment machine.\n\n\ndocker Network: Network of your My Thai Star application. You can deploy several versions of MTS in the same server by changing the port and the docker Network.\n\n\nVERSION: The version that you can to deploy.\n\n\n\n\n\nPipeline steps\n\n\n\nCreate docker network: Create the docker network with the name provided as parameter.\n\n\nCreate the Docker image: If build-Reverse-Proxy is enabled, this step will create a new docker image and publish it to the docker registry.\n\n\nDeploy new image: Deploy a new reverse proxy container. If it already exists, first it delete the previous one.\n\n\n\n\n\n\n\n\n"}